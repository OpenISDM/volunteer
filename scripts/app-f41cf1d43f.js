!function(){"use strict";angular.module("vmsFrontend",["ngAnimate","ngCookies","ngTouch","ngSanitize","ngMessages","ngAria","LocalStorageModule","ui.router","ui.bootstrap","toastr","angular-jwt","naif.base64","angular-loading-bar","anim-in-out","xeditable","ngTagsInput","ngLodash","froala","pascalprecht.translate","validation.match","vmsFrontend.config"])}(),function(){"use strict";function e(e,t,o,l,a){function r(){var e=function(e){a.debug(e.skills),i.skills=e.skills,l.originSkills=angular.copy(e.skills),a.debug("### $scope.originSkills ###"),a.debug(l.originSkills)},o=function(e){};t.getAll().then(e)["catch"](o)}function n(){var t=function(e){a.debug(e.equipment),i.equipment=e.equipment,l.equipment=angular.copy(e.equipment),a.debug("### $scope.equipment ###"),a.debug(l.equipment)},o=function(e){};e.getAll().then(t)["catch"](o)}var i=this;i.equipment=[],i.skills=[],i.skillCandidatedKeywords=[],i.equipmentCandidatedKeywords=[],l.originSkills=[],l.originEquipment=[],angular.element(document).ready(r),angular.element(document).ready(n),i.refreshSkillCandidatedKeywords=function(e){a.debug("search skill keyword"),a.debug(e);var o=function(e){return a.debug("refreshSkillCandidatedKeywords onSuccess()"),a.debug(e),e};return t.getCandidatedKeywords(e).then(o)},i.refreshEquipmentCandidateKeywords=function(t){a.debug("search equipment keyword"),a.debug(t);var o=function(e){return a.debug("refreshEquipmentCandidateKeywords onSuccess()"),a.debug(e),e};return e.getCandidatedKeywords(t).then(o)},i.updateSkills=function(){a.debug("updateSkills()"),a.debug(i.skills);var e=function(){r()},n=function(e){};a.debug("$scope.originSkills"),a.debug(l.originSkills),a.debug("vm.skills"),a.debug(i.skills);var s=o.getExistingIndexes(l.originSkills,i.skills);a.debug("existingIndexes"),a.debug(s),t.update(i.skills,s).then(e)["catch"](n)},i.updateEquipment=function(){a.debug("updateEquipment()"),a.debug(i.equipment);var t=function(){r()},n=function(e){};a.debug("$scope.originEquipment"),a.debug(l.originEquipment);var s=o.getExistingIndexes(l.originEquipment,i.equipment);a.debug("existingIndexes"),a.debug(s),e.update(i.equipment,s).then(t)["catch"](n)}}e.$inject=["userEquipment","userSkill","arrayHelpersService","$scope","$log"],angular.module("vmsFrontend").controller("UserEditSkillEquipmentController",e)}(),function(){"use strict";function e(e,t){var o=this;o.volunteer=t.search()}e.$inject=["$log","$location"],angular.module("vmsFrontend").controller("UserRegisterSuccessController",e)}(),function(){"use strict";function e(e,t,o){function l(){var o=function(t){a.profile=t.data,e.debug(a.profile)},l=function(t){e.debug(t)};t.get().then(o,l)}var a=this;a.cities=o,a.datePicker={mode:"year",dateOptions:{datepickerMode:"year",minMode:"'year'",showWeeks:"false"},status:{opened:!1},format:"yyyy"},a.openDatePicker=function(e){e.preventDefault(),e.stopPropagation(),a.datePicker.status.opened=!0},angular.element(document).ready(l()),a.updateAboutAndContact=function(){var o=function(t){e.debug(t),a.profile=t.data,a.alert=[],a.alert.push({type:"success",data:{message:"alert.success.updated_successfully"}})};e.debug(a.profile),t.update(a.profile).then(o)},a.selectAvatar=function(e,o,l,r,n,i){var s="data:"+i.filetype+";base64,"+i.base64;t.updateAvatar(s,!0).then(function(e){var t=e.data;a.profile.avatar_url=t.avatar_url}),a.avatar=s}}e.$inject=["$log","userProfile","cities"],angular.module("vmsFrontend").controller("UpdateUserProfileController",e)}(),function(){"use strict";function e(e,t,o,l,a){function r(){var e=function(e){o.debug("getProfile() done"),o.debug(e),n.profile=e.data},t=function(e){o.debug(e)};a.get().then(e,t)}var n=this;n.open=function(){e.open({templateUrl:"myModalContent.html",controller:"ModalInstanceCtrl",controllerAs:"vm"})},angular.element(document).ready(r())}e.$inject=["$uibModal","cities","$log","defaultAvatarPath","userProfile"],angular.module("vmsFrontend").controller("ShowUserProfileController",e),angular.module("vmsFrontend").controller("ModalInstanceCtrl",["$state","$uibModalInstance","$log","vmsLocalStorage","userProfile",function(e,t,o,l,a){var r=this;r.remind="提醒您，帳號刪除後無法再還原，如果您確定要刪除帳號。",r.ok=function(){o.debug("deleteClickOk");var n={username:l.getUsername(),password:r.password};o.debug("username = "+n.username),o.debug("password = "+n.password),a.drop(n).then(function(l){o.debug("delete success"),t.close(),e.go("login")})["catch"](function(e){o.debug("delete failure"),o.debug(e),401==e.status&&(r.deleteMsg="您的密碼輸入錯誤，請重新輸入")})},r.cancel=function(){t.dismiss("cancel")}}])}(),function(){"use strict";function e(e,t,o,l,a,r,n){function i(){e.debug("EmailVerificationController verify()"),e.debug("email = "+s.volunteer.email),e.debug("verification_token = "+s.volunteer.verification_token);var t=function(t){e.debug("emailVerification success"),e.debug(t),s.verification=!1,s.verificationSuccess=!0,s.verificationStatus=s.verification||s.verificationSuccess,n(function(){a.go("profile")},5e3)},l=function(t){e.debug("emailVerification error"),e.debug(t),s.verification=!1,s.verificationStatus=s.verification||s.verificationSuccess};o.emailVerification(s.volunteer.email,s.volunteer.verification_token).then(t)["catch"](l)}var s=this;s.verification=!0,s.verificationSuccess=!1,s.verificationStatus=s.verification||s.verificationSuccess,e.debug("vm.verification "+s.verification),e.debug("vm.verificationSuccess "+s.verificationSuccess),e.debug("vm.verificationStatus "+s.verificationStatus),s.volunteer=t.search(),angular.isDefined(s.volunteer.email)&&angular.isDefined(s.volunteer.verification_token)?angular.element(document).ready(i()):(e.debug("verification false"),s.verification=!1,s.verificationStatus=s.verification||s.verificationSuccess,e.debug("vm.verificationStatus "+s.verificationStatus))}e.$inject=["$log","$location","vmsClient","authPrinciple","$state","$rootScope","$timeout"],angular.module("vmsFrontend").controller("VerifyUserEmailController",e)}(),function(){"use strict";function e(e,t,o){function l(t){var o;return angular.forEach(r,function(e,l){e.id==t&&(o=e)}),e.debug("getCustomFieldById"),e.debug(o),o}var a=this,r=t.data.custom_fields.data;a.getCustomFieldById=l,a.members=t.data.members.data,e.debug("vm.members"),e.debug(a.members)}e.$inject=["$log","membersData","vmsClient"],angular.module("vmsFrontend").controller("ProjectMemberListController",e)}(),function(){"use strict";function e(e,t,o,l){function a(){l.getManagedProjectList().then(function(t){e.debug(t),r.projects=t.data})["catch"](function(e){r.alert=e})}var r=this;angular.element(document).ready(a()),r["delete"]=function(o){r.deletedProjectId=o;t.open({animation:!0,templateUrl:"deleteProject.html",controller:["$uibModalInstance",function(t){var o=this;o.remind="提醒您，帳號刪除後無法再還原，如果您確定要刪除帳號。",o.ok=function(){e.debug("=== ok ===")},o.cancel=function(){t.dismiss("cancel")}}],controllerAs:"vm"})}}e.$inject=["$log","$uibModal","vmsClient","project"],angular.module("vmsFrontend").controller("ManagedProjectListController",e)}(),function(){"use strict";function e(e,t){function o(){var e=function(e){l.projects=e.data},o=function(){};t.getAttendingProject().then(e)["catch"](o)}var l=this;angular.element(document).ready(o())}e.$inject=["$log","vmsClient"],angular.module("vmsFrontend").controller("AttendingProjectListController",e)}(),function(){"use strict";function e(e,t){function o(e){l.searchProject=void 0,l.searchField=e}var l=this;l.setSearchField=o,l.searchField="name",l.projects=t}e.$inject=["$log","projects"],angular.module("vmsFrontend").controller("AllProjectListController",e)}(),function(){"use strict";function e(e,t,o,l,a,r,n){var i=this;i.permissionOptions=r,i.project=l.data,i.membersList=a,i.attend=function(){var t=function(t){e.debug("attendProject() success")},l=function(t){e.debug("attendProject() failure")};o.attendProject(projectId).then(t)["catch"](l)},i.trustAsHtml=function(e){return n.trustAsHtml(e)},i.showMember=function(o){e.debug("showMemeber"),e.debug(o);var l='<div class="modal-header"><h4>{{ vm.member.attributes.username }} 已參加的專案</h4></div><div class="modal-body"><show-attending-projects member-id="vm.member.id"></show-attending-projects></div>';t.open({animation:!0,template:l,controller:["member",function(t){e.debug("modal Controller");var o=this;o.member=t,e.debug("vm.member"),e.debug(o.member)}],controllerAs:"vm",resolve:{member:function(){return o}}})}}e.$inject=["$log","$uibModal","vmsClient","projectData","members","PERMISSION_OPTIONS","$sce"],angular.module("vmsFrontend").controller("ManagedProjectDetailController",e)}(),function(){"use strict";function e(e,t,o,l,a,r){function n(t){e.debug("getProject()");var o=function(e){s.project=e.data,s.meta=e.meta},l=function(t){e.debug(t)};a.getById(t).then(o)["catch"](l)}function i(t){var o=function(t){s.membersList=t.data,e.debug(t.data)},a=function(t){e.debug(t)};l.getProjectMembers(t).then(o)["catch"](a)}var s=this;s.permissionOptions=r,s.projectId=o.id,angular.element(document).ready(n(s.projectId)),angular.element(document).ready(i(s.projectId)),s.isGuest=function(){return angular.isDefined(s.project)?"guest"==s.meta.role.name:!1},s.isCreator=function(){return e.debug("isCreator()"),angular.isDefined(s.project)?"creator"==s.meta.role.name:!1},s.isMember=function(){return angular.isDefined(s.project)?"member"==s.meta.role.name:!1},s.attend=function(){var o=function(o){e.debug("attendProject() success"),t.reload()},a=function(t){e.debug("attendProject() failure")};l.attendProject(s.projectId).then(o)["catch"](a)}}e.$inject=["$log","$state","$stateParams","vmsClient","project","PERMISSION_OPTIONS"],angular.module("vmsFrontend").controller("ProjectDetailController",e)}(),function(){"use strict";function e(e,t,o,l){function a(){l.getAllByProjectId(s).then(function(e){0==e.data.length&&(i.alerts=[{type:"info",data:{message:"alert.info.non_custom_field"}}]),i.customFields=e.data})["catch"](function(e){i.alerts=[],i.alerts.push(e)})}function r(){i.alerts=[],i.customFields.push({order:i.customFields.length})}function n(e){o.open({animation:!0,templateUrl:"customFieldPreview.html",controller:["$uibModalInstance",function(t){var o=this;o.data=e,o.cancel=function(){t.dismiss("cancel")}}],controllerAs:"vm"})}var i=this,s=t.projectId;angular.element(document).ready(a),i.preview=n,i.appendCustomField=r}e.$inject=["$log","$stateParams","$uibModal","projectCustomField"],angular.module("vmsFrontend").controller("ManageProjectCustomFieldsController",e)}(),function(){"use strict";function e(e,t,o){function l(){o.getMemberDataByProjectId(r).then(function(e){a.data=e.data})["catch"](function(e){a.alert=[e]})}var a=this,r=t.projectId;angular.element(document).ready(l),a.update=function(){e.debug("=== vm.update() ==="),e.debug(a.data);var t=[];angular.forEach(a.data,function(t){e.debug(t);var o=t.custom_field_data;null!=o&&(e.debug("value"),e.debug(o),delete o.created_at,delete o.updated_at,o.custom_field_id=t.id),this.push(o)},t),e.debug(t);var l=function(t){e.debug(t),a.msg="已成功送出。"},n=function(t){e.debug(t)};o.storeOrUpdateMemberDataByProjectId(t,r).then(l)["catch"](n)},a.remove=function(){}}e.$inject=["$log","$stateParams","projectCustomField"],angular.module("vmsFrontend").controller("FillCustomFieldsController",e)}(),function(){"use strict";function e(e){function t(e){var t=this;e.debug("CustomFieldPreviewController"),e.debug(t.data)}t.$inject=["$log"];var o={templateUrl:"app/components/customField/preview/customFieldPreview.html",restrict:"E",scope:{data:"="},controller:t,controllerAs:"vm",bindToController:!0};return o}e.$inject=["$compile"],angular.module("vmsFrontend").directive("customFieldPreview",e)}(),function(){"use strict";function e(e,t,o){function l(){return t({method:"GET",url:n+"/users/me/skills"})}function a(e){return t({method:"POST",url:n+"/users/me/skills",data:e})}function r(e){return t({method:"GET",url:n+"/skill_candidates/"+e})}var n=o.apiBaseUrl,i={getAll:l,update:a,getCandidatedKeywords:r};return i}e.$inject=["$log","$http","config"],angular.module("vmsFrontend").factory("userSkillEndpoint",e)}(),function(){"use strict";function e(e,t,o){function l(){var e=t.defer();return o.getAll().then(function(t){e.resolve(t.data)})["catch"](function(t){e.resolve(t.data)}),e.promise}function a(e,l){var a=t.defer(),r=[];angular.forEach(e,function(e){r.push(e.name)});var n={skills:r,existing_skill_indexes:l};return o.update(n).then(function(e){a.resolve()})["catch"](function(e){a.reject(e.data)}),a.promise}function r(e){var l=t.defer();return o.getCandidatedKeywords(e).then(function(e){l.resolve(e.data.result)})["catch"](function(e){l.reject(e.data)}),l.promise}var n={getAll:l,update:a,getCandidatedKeywords:r};return n}e.$inject=["$log","$q","userSkillEndpoint"],angular.module("vmsFrontend").factory("userSkill",e)}(),function(){"use strict";function e(e,t,o){function l(e){return t({method:"PUT",url:i+"/users/me/password",data:e})}function a(e){return t({method:"POST",url:i+"/users/forgot_password",data:e})}function r(e){return t({method:"POST",url:i+"/users/password_reset/verify",data:e})}function n(e){return t({method:"POST",url:i+"/users/password_reset",data:e})}var i=o.apiBaseUrl,s={update:l,forgotPassword:a,verifyPasswordReset:r,resetPassword:n};return s}e.$inject=["$log","$http","config"],angular.module("vmsFrontend").factory("userPasswordEndpoint",e)}(),function(){"use strict";function e(e,t,o,l){function a(e,a){var r=t.defer(),n={original_password:e,new_password:a};return o.update(n).then(function(e){r.resolve()})["catch"](function(e){var t,o=e.data,a=o.errors;t=422===e.status?l.convertToValidationDanger(a):l.convertToDanger(a),r.reject(t)}),r.promise}function r(e){var a=t.defer();return o.forgotPassword(e).then(function(e){a.resolve(e.data)})["catch"](function(e){var t,o=e.data,r=o.errors;t=422===e.status?l.convertToValidationDanger(r):l.convertToDanger(r),a.reject(t)}),a.promise}function n(e,a){var r=t.defer(),n={email:e,token:a};return o.verifyPasswordReset(n).then(function(){r.resolve()})["catch"](function(e){var t,o=e.data,a=o.errors;t=422===e.status?l.convertToValidationDanger(a):l.convertToDanger(a),r.reject(t)}),r.promise}function i(e,a,r,n){var i=t.defer(),s={email:e,token:a,password:r,password_confirmation:n};return o.resetPassword(s).then(function(e){i.resolve(e.data)})["catch"](function(e){var t,o=e.data,a=o.errors;t=422===e.status?l.convertToValidationDanger(a):l.convertToDanger(a),i.reject(t)}),i.promise}var s={update:a,forgotPassword:r,verifyPasswordReset:n,resetPassword:i};return s}e.$inject=["$log","$q","userPasswordEndpoint","alertMessage"],angular.module("vmsFrontend").factory("userPassword",e)}(),function(){"use strict";function e(e,t,o){function l(e){return t({method:"POST",url:d+"/register",data:e})}function a(){return t({method:"GET",url:d+"/users/me"})}function r(e){return t({method:"PUT",url:d+"/users/me",data:e})}function n(e,o){var l={avatar:e,skip_profile:o};return t({method:"POST",url:d+"/users/me/avatar",data:l})}function i(e){return t({method:"POST",url:d+"/users/me/delete",data:e})}function s(e){return t({method:"GET",url:d+"/users/"+e+"/attending_projects"})}function c(e){return t({method:"POST",url:d+"/users/forgot_password",data:e})}var d=o.apiBaseUrl,u={create:l,get:a,update:r,updateAvatar:n,drop:i,getAttendingProjects:s,passwordReset:c};return u}e.$inject=["$log","$http","config"],angular.module("vmsFrontend").factory("userProfileEndpoint",e)}(),function(){"use strict";function e(e,t,o,l,a,r){function n(a,n){var i=t.defer();return o.create(a).then(function(t){var o=t.data,a=t.headers("Authorization");e.debug(o),l.setAuthentication(o.data,a,n),i.resolve(t.data)})["catch"](function(e){var t=e.data,o=t.errors,l=r.convertToValidationDanger(o);i.reject(l)}),i.promise}function i(){var e=t.defer();return o.get().then(function(t){var o=t.data,l=o.data.birth_year;o.data.birth_year=new Date(l,1),e.resolve(o)})["catch"](function(t){e.reject(t.data)}),e.promise}function s(e){var l=t.defer();if(e.birth_year instanceof Date){var a=e.birth_year;e.birth_year=a.getFullYear()}return o.update(e).then(function(e){var t=e.data,o=t.data.birth_year;t.data.birth_year=new Date(o,1),l.resolve(e.data)})["catch"](function(e){l.reject(e.data)}),l.promise}function c(e,l){var a=t.defer();return o.updateAvatar(e,l).then(function(e){a.resolve(e.data)})["catch"](function(e){}),a.promise}function d(e){var a=t.defer();return o.drop(e).then(function(e){l.logout(),a.resolve(e.data)})["catch"](function(e){a.reject(e.data)}),a.promise}function u(e){var l=t.defer();return o.getAttendingProjects(e).then(function(e){l.resolve(e.data.data)})["catch"](function(e){l.reject(e.data)}),l.promise}function m(l){e.debug("forgotPassword data"),e.debug(l);var a=t.defer();return o.passwordReset(l).then(function(e){a.resolve(e.data)})["catch"](function(e){var t=e.data,o=t.errors,l=r.convertToValidationDanger(o);a.reject(l)}),a.promise}var p={create:n,get:i,update:s,updateAvatar:c,drop:d,getAttendingProjects:u,forgotPassword:m};return e.debug("userProfile"),p}e.$inject=["$log","$q","userProfileEndpoint","userAuthentication","vmsLocalStorage","alertMessage"],angular.module("vmsFrontend").factory("userProfile",e)}(),function(){"use strict";function e(e,t,o){function l(e){return t({method:"POST",url:i+"/users/me/experiences",data:e})}function a(){return t({method:"GET",url:i+"/users/me/experiences"})}function r(e){return t({method:"PUT",url:i+"/users/me/experiences",data:e})}function n(e){return t({method:"DELETE",url:i+"/users/me/experiences/"+e})}var i=o.apiBaseUrl,s={create:l,getAll:a,update:r,dropById:n};return s}e.$inject=["$log","$http","config"],angular.module("vmsFrontend").factory("userExperienceEndpoint",e)}(),function(){"use strict";function e(e,t,o){function l(e){var l=t.defer();return o.create(e).then(function(){l.resolve()})["catch"](function(e){l.reject(e.data)}),l.promise}function a(){var e=t.defer();return o.getAll().then(function(t){e.resolve(t.data)})["catch"](function(t){e.reject(t.data)}),e.promise}function r(e){var l=t.defer();return o.update(e).then(function(){l.resolve()})["catch"](function(e){l.reject(e.data)}),l.promise}function n(e){var l=t.defer();return o.dropById(e).then(function(){l.resolve()})["catch"](function(e){l.reject(e.data)}),l.promise}var i={create:l,getAll:a,update:r,dropById:n};return i}e.$inject=["$log","$q","userExperienceEndpoint"],angular.module("vmsFrontend").factory("userExperience",e)}(),function(){"use strict";function e(e,t,o){function l(){return t({method:"GET",url:n+"/users/me/equipment"})}function a(e){return t({method:"POST",url:n+"/users/me/equipment",data:e})}function r(e){return t({method:"GET",url:n+"/equipment_candidates/"+e})}var n=o.apiBaseUrl,i={getAll:l,update:a,getCandidatedKeywords:r};return i}e.$inject=["$log","$http","config"],angular.module("vmsFrontend").factory("userEquipmentEndpoint",e)}(),function(){"use strict";function e(e,t,o){function l(){var e=t.defer();return o.getAll().then(function(t){e.resolve(t.data)})["catch"](function(t){e.resolve(t.data)}),e.promise}function a(e,l){var a=t.defer(),r=[];angular.forEach(e,function(e){r.push(e.name)});var n={equipment:r,existing_equipment_indexes:l};return o.update(n).then(function(e){a.resolve()})["catch"](function(e){a.reject(e.data)}),a.promise}function r(e){var l=t.defer();return o.getCandidatedKeywords(e).then(function(e){l.resolve(e.data.result)})["catch"](function(e){l.reject(e.data)}),l.promise}var n={getAll:l,update:a,getCandidatedKeywords:r};return n}e.$inject=["$log","$q","userEquipmentEndpoint"],angular.module("vmsFrontend").factory("userEquipment",e)}(),function(){"use strict";function e(e,t,o){function l(e){return t({method:"POST",url:i+"/users/me/educations",data:e})}function a(){return t({method:"GET",url:i+"/users/me/educations"})}function r(e){return t({method:"PUT",url:i+"/users/me/educations",data:e})}function n(e){return t({method:"DELETE",url:i+"/users/me/educations/"+educationId})}var i=o.apiBaseUrl,s={create:l,getAll:a,update:r,dropById:n};return s}e.$inject=["$log","$http","config"],angular.module("vmsFrontend").factory("userEducationEndpoint",e)}(),function(){"use strict";function e(e,t,o){function l(l){var a=t.defer();return o.create(l).then(function(t){e.debug("create an education successfully"),a.resolve(t.data)})["catch"](function(t){e.error("failed to create an education"),a.reject(t.data)}),a.promise}function a(){var e=t.defer();return o.getAll().then(function(t){e.resolve(t.data)})["catch"](function(t){e.reject(t.data)}),e.promise}function r(e){var l=t.defer();return o.update(e).then(function(){l.resolve()})["catch"](function(e){l.reject(e.data)}),l.promise}function n(e){var l=t.defer();return o.dropById(e).then(function(){l.resolve()})["catch"](function(e){l.reject(e.data)}),l.promise}var i={create:l,getAll:a,update:r,dropById:n};return i}e.$inject=["$log","$q","userEducationEndpoint"],angular.module("vmsFrontend").factory("userEducation",e)}(),function(){"use strict";function e(e,t,o){function l(e){return t({method:"POST",url:i+"/auth",data:e})}function a(){return t({method:"DELETE",url:i+"/auth"})}function r(){return t({method:"POST",url:i+"/auth/refresh_token"})}function n(e,o){return t({method:"GET",url:i+"/email_verification/"+e+"/"+o})}var i=o.apiBaseUrl,s={login:l,logout:a,refreshToken:r,verifyEmail:n};return s}e.$inject=["$log","$http","config"],angular.module("vmsFrontend").factory("userAuthenticationEndpoint",e)}(),function(){"use strict";function e(e,t,o,l,a,r,n,i,s){function c(l,r){var c=t.defer();return a.login(l).then(function(t){e.debug("login success"),e.debug(t.headers("Authorization"));var l=t.headers("Authorization"),a=t.data;angular.isDefined(l)&&(w=!0,e.debug(a),e.debug("avatar_url = "+a.data.avatar_url),n.setJwt(l),n.setUsername(a.data.username),n.setLastName(a.data.last_name),n.setAvatarPath(a.data.avatar_url),g(r),o.$broadcast(i.AUTHENTICATED_SUCCESS_EVENT),c.resolve())})["catch"](function(e){var t;d(),t=401===e.status?["incorrect_username_or_password"]:e.data.errors;var o=s.convertToDanger(t);c.reject(o)}),c.promise}function d(){e.debug("authenticated was set into false"),w=!1,b()}function u(e,t,o){w=!0,n.setUsername(e.username),n.setLastName(e.last_name),n.setJwt(t),n.setAvatarPath(e.avatar_url),g(o)}function m(){var o=t.defer();return a.refreshToken().then(function(e){var t=e.headers("Authorization");angular.isDefined(t)&&null!=t?(n.setJwt(t),o.resolve(t)):o.reject()})["catch"](function(t){e.error("refreshToken catch()"),d(),o.reject()}),o.promise}function p(e,o){var l=t.defer();return a.verifyEmail(e,o).then(function(e){var t=e.data;l.resolve(t)})["catch"](function(e){l.reject(e)}),l.promise}function v(){return w}function g(e){n.setRole(e),y=e}function f(){return angular.isDefined(y)||(y=n.getRole()),y}function h(){var o=t.defer();return l(function(){r.identity()?(w=!0,o.resolve()):(e.debug("authenticated was set into false"),w=!1,o.reject())},500),o.promise}function b(){n.removeLastName(),n.removeUsername(),n.removeJwt(),n.removeRole(),n.removeAvatarPath()}var y,w=n.jwtExists(),j={login:c,logout:d,setAuthentication:u,refreshToken:m,verifyEmail:p,isAuthenticated:v,switchRole:g,getRole:f,authorize:h};return j}e.$inject=["$log","$q","$rootScope","$timeout","userAuthenticationEndpoint","authPrinciple","vmsLocalStorage","BROADCAST_EVENTS_LIST","alertMessage"],angular.module("vmsFrontend").factory("userAuthentication",e)}(),function(){"use strict";function e(e,t,o){function l(e){return t({method:"GET",url:i+"/projects/"+e+"/hyperlinks"})}function a(e,o){return t({method:"POST",url:i+"/projects/"+e+"/hyperlinks",data:o})}function r(e,o){return t({method:"DELETE",url:i+"/projects/"+e+"/hyperlinks/"+o})}function n(e,o){return t({method:"POST",url:i+"/projects/"+e+"/hyperlinks/create_or_update_bulk",data:o})}var i=o.apiBaseUrl,s={getByProjectId:l,create:a,dropByProjectIdAndHyperlinkId:r,createOrUpdate:n};return s}e.$inject=["$log","$http","config"],angular.module("vmsFrontend").factory("projectHyperlinkEndpoint",e)}(),function(){"use strict";function e(e,t,o){function l(e){var l=t.defer();return o.getByProjectId(e).then(function(e){l.resolve(e.data)})["catch"](function(e){l.reject(e)}),l.promise}function a(e,l){var a=t.defer();return o.create(e,l).then(function(e){a.resolve(e.data)})["catch"](function(e){a.resolve(e)}),a.promise}function r(e,l){var a=t.defer();return o.dropByProjectIdAndHyperlinkId(e,l).then(function(){a.resolve()})["catch"](function(){a.reject()}),a.promise}function n(e,l,a){var r=t.defer(),n={};return angular.isDefined(l)&&l.length>0&&(n.create=l),angular.isDefined(a)&&a.length>0&&(n.update=a),o.createOrUpdate(e,n).then(function(e){r.resolve(e.data)})["catch"](function(e){r.reject(e)}),r.promise}var i={getByProjectId:l,create:a,dropByProjectIdAndHyperlinkId:r,createOrUpdate:n};return i}e.$inject=["$log","$q","projectHyperlinkEndpoint"],angular.module("vmsFrontend").factory("projectHyperlink",e)}(),function(){"use strict";function e(e,t,o,l){o.debug("### refreshJwtHttpInterceptor ###");var a={responseError:function(l){var a=e.get("userAuthentication"),r=e.get("$http"),n=t.defer(),i=a.isAuthenticated();if(o.debug("### responseError ###"),o.debug(l),o.debug("isAuthenticated = "+i),401===l.status&&i){o.debug("=== 401 ===");var s=function(e){o.debug("refresh successCallback()"),o.debug(e),l.config.headers.Authorization=e,n.resolve()},c=function(){o.error("refresh failureCallback()"),a.logout(),n.reject()};return a.refreshToken().then(s)["catch"](c),n.promise.then(function(){return r(l.config)})}return o.debug("### refreshJwtHttpInterceptor reject"),t.reject(l)}};return a}e.$inject=["$injector","$q","$log","vmsLocalStorage"],angular.module("vmsFrontend").factory("refreshJwtHttpInterceptor",e)}(),function(){"use strict";function e(e,t,o){function l(e){return t({method:"GET",url:i+"/projects/"+e+"/custom_fields"})}function a(e){return t({method:"GET",url:i+"/projects/"+e+"/members/custom_field_data"})}function r(e,o){return t({method:"POST",url:i+"/projects/"+o+"/custom_fields",data:e})}function n(e,o){return t({method:"POST",url:i+"/projects/"+o+"/members/bulk_custom_field_data",data:e})}var i=o.apiBaseUrl,s={getAllByProjectId:l,getMemberDataByProjectId:a,storeOrUpdateByProjectId:r,storeOrUpdateMemberDataByProjectId:n};return s}e.$inject=["$log","$http","config"],angular.module("vmsFrontend").factory("projectCustomFieldEndpoint",e)}(),function(){"use strict";function e(e,t,o,l){function a(e){var a=t.defer();return o.getAllByProjectId(e).then(function(e){a.resolve(e.data)})["catch"](function(e){var t,o=e.data,r=o.errors;t=422===e.status?l.convertToValidationDanger(r):l.convertToDanger(r),a.reject(t)}),a.promise}function r(e){var a=t.defer();return o.getMemberDataByProjectId(e).then(function(e){a.resolve(e.data)})["catch"](function(e){var t,o=e.data,r=o.errors;t=422===e.status?l.convertToValidationDanger(r):l.convertToDanger(r),a.reject(t)}),a.promise}function n(e,a){var r=t.defer();return o.storeOrUpdateByProjectId(e,a).then(function(e){r.resolve(e.data)})["catch"](function(e){var t,o=e.data,a=o.errors;t=422===e.status?l.convertToValidationDanger(a):l.convertToDanger(a),r.reject(t)}),r.promise}function i(e,a){var r=t.defer();return o.storeOrUpdateMemberDataByProjectId(e,a).then(function(e){r.resolve(e.data)})["catch"](function(e){var t,o=e.data,a=o.errors;t=422===e.status?l.convertToValidationDanger(a):l.convertToDanger(a),r.reject(t)}),r.promise}var s={getAllByProjectId:a,getMemberDataByProjectId:r,storeOrUpdateByProjectId:n,storeOrUpdateMemberDataByProjectId:i};return s}e.$inject=["$log","$q","projectCustomFieldEndpoint","alertMessage"],angular.module("vmsFrontend").factory("projectCustomField",e)}(),function(){"use strict";function e(e){var t={request:function(t){return t.headers["X-VMS-API-Key"]=e.apiKey,t}};return t}e.$inject=["config"],angular.module("vmsFrontend").factory("apiKeyHttpInterceptor",e)}(),function(){"use strict";function e(e,t){var o={request:function(o){var l=e.get("authPrinciple"),a=e.get("vmsLocalStorage");return l.identity()?(t.debug("token key exists"),o.headers.Authorization=a.getJwt()):t.debug("token key is not found"),o}};return o}e.$inject=["$injector","$log"],angular.module("vmsFrontend").factory("jwtHttpInterceptor",e)}(),function(){"use strict";function e(e,t,o){function l(){r.alert=[],o.resetPassword(n,i,r.data.password,r.data.passwordConfirmation).then(function(){r.alert.push({type:"success",data:{message:"alert.success.reset_password_successfully"}})})["catch"](function(e){r.alert.push(e)})}function a(){e.debug("verifyPasswordReset()"),o.verifyPasswordReset(n,i).then(function(){r.showResetForm=!0})["catch"](function(e){r.alert=[e]})}var r=this;r.submit=l,r.data={},r.showResetForm=!1;var n=t.email,i=t.token;angular.element(document).ready(function(){e.debug("ready"),a()})}e.$inject=["$log","$stateParams","userPassword"],angular.module("vmsFrontend").controller("ResetPasswordController",e)}(),function(){"use strict";function e(e,t,o,l,a,r,n,i,s){var c=this;c.cities=i,e.log("UserRegisterController"),c.showAvatar=l,c.datePicker={mode:"year",dateOptions:{datepickerMode:"'year'",minMode:"'year'",minDate:"minDate",showWeeks:"false"},status:{opened:!1},format:"yyyy"},c.register=function(){e.debug("=== register ==="),e.debug(c.volunteer),c.showAvatar!=l&&(c.volunteer.avatar=c.showAvatar);var o=function(e){t.go("registerSuccess",{last_name:c.volunteer.last_name,email:c.volunteer.email})},r=function(t){e.debug(t),c.alerts=[],c.alerts.push(t),e.debug(c.alerts)};return c.volunteer.password!=c.passwordConfirm?(c.alert=[],void c.alert.push({type:"danger",message:"密碼不相符"})):void a.create(c.volunteer,"volunteer").then(o)["catch"](r)},c.selectAvatar=function(e,t,o,l,a,r){var n="data:"+r.filetype+";base64,"+r.base64;c.showAvatar=n},c.openDatePicker=function(t){e.debug("click openDatePicker"),t.preventDefault(),t.stopPropagation(),c.datePicker.status.opened=!0}}e.$inject=["$log","$state","fieldName","defaultAvatarPath","userProfile","vmsErrorMessage","$scope","cities","vmsLocalStorage"],angular.module("vmsFrontend").controller("UserRegisterController",e)}(),function(){"use strict";function e(e,t,o,l){var a=this;a.alert=[],a.login=function(){e.debug("=== vm.role ==="),e.debug(a.role);var r=function(){e.debug("login success"),"login"==o.toState.name?l.go("profile"):angular.isDefined(o.toStateParams)?l.go(o.toState.name,o.toStateParams):l.go(o.toState.name)},n=function(t){e.debug("login error"),e.debug(t),a.alert=[],a.alert.push(t)};t.login(a.credentials,a.role).then(r)["catch"](n)}}e.$inject=["$log","userAuthentication","$rootScope","$state"],angular.module("vmsFrontend").controller("UserLoginController",e)}(),function(){"use strict";function e(e,t){function o(){e.debug("vm.data"),e.debug(l.data),l.alert=[],t.forgotPassword(l.data).then(function(){l.alert.push({type:"success",data:{message:"alert.success.sent_password_reset"}})})["catch"](function(e){l.alert.push(e)})}var l=this;l.submit=o,l.data={}}e.$inject=["$log","userPassword"],angular.module("vmsFrontend").controller("ForgotPasswordController",e)}(),function(){"use strict";function e(e,t,o){function l(){var o=function(t){e.debug(t),n.experiences=t.experiences,angular.isDefined(t)?(e.debug("vm.experiences.length"),e.debug(n.experiences.length),0==n.experiences.length&&(n.isShowAddExperience=!0)):(e.debug("experience value is not defined"),n.isShowAddExperience=!0)};t.getAll().then(o)}function a(){for(var e=new Date,t=i;t<=e.getFullYear();t++)n.years.push({value:t,text:t+" 年"})}function r(e){var t="experience"+e,o=n[t];return o}var n=this,i=1970;n.years=new Array,n.isShowAddExperience=!1,angular.element(document).ready(l),angular.element(document).ready(a),n.addExperience=function(){var o=function(e){l(),n.isShowAddExperience=!1},a=function(e){};e.debug("addExperiences()"),e.debug(n.sExperience),t.create(n.sExperience).then(o)["catch"](a)},n.updateExperience=function(l){var a=o("getById"),i=a(n.experiences,l);e.debug(i);var s=function(){r(l).$hide()},c=function(){};t.update(i).then(s)["catch"](c)},n.deleteExperience=function(e){var o=function(){
r(e).$hide(),l()},a=function(){};t.dropById(e).then(o)["catch"](a)},n.editableFormShow=function(e){r(e).$show()},n.editableIsVisible=function(t){e.debug("vm.editableIsVisible()");var o=r(t);if(null==o)return!1;var l=o.$visible;return l},n.editableFormCancel=function(e){r(e).$cancel()},n.setAddExperienceVisible=function(){n.isShowAddExperience=!0},n.setAddExperienceInvisible=function(){n.isShowAddExperience=!1},n.onShowEditableForm=function(e){var t=angular.element(document).find('form[name="vm.experience'+e+'"]');t.addClass("editable-form-section")},n.onHideEditableForm=function(e){var t=angular.element(document).find('form[name="vm.experience'+e+'"]');t.removeClass("editable-form-section")}}e.$inject=["$log","userExperience","$filter"],angular.module("vmsFrontend").controller("UserExperienceController",e)}(),function(){"use strict";function e(e,t,o,l){function a(){var o=function(t){e.debug(t),s.educations=t.educations,angular.isDefined(t)?(e.debug("vm.educations.length"),e.debug(s.educations.length),0==s.educations.length&&(s.isShowAddEducation=!0)):(e.debug("education value is not defined"),s.isShowAddEducation=!0)};t.getAll().then(o)}function r(){for(var e=new Date,t=c;t<=e.getFullYear();t++)s.years.push({value:t,text:t+" 年"})}function n(){s.degrees=o}function i(e){var t="education"+e,o=s[t];return o}var s=this,c=1970;s.years=new Array,s.isShowAddEducation=!1,angular.element(document).ready(a),angular.element(document).ready(r),angular.element(document).ready(n),s.addEducation=function(){var o=function(e){a(),s.isShowAddEducation=!1},l=function(e){};e.debug("addEducations()"),e.debug(s.sEducation),t.create(s.sEducation).then(o)["catch"](l)},s.updateEducation=function(o){var a=l("getById"),r=a(s.educations,o);e.debug(r);var n=function(){i(o).$hide()},c=function(){};t.update(r).then(n)["catch"](c)},s.deleteEducation=function(e){var o=function(){i(e).$hide(),a()},l=function(){};t.dropById(e).then(o)["catch"](l)},s.editableFormShow=function(e){i(e).$show()},s.editableIsVisible=function(t){e.debug("vm.editableIsVisible()");var o=i(t);if(null==o)return!1;var l=o.$visible;return l},s.editableFormCancel=function(e){i(e).$cancel()},s.setAddEducationVisible=function(){s.isShowAddEducation=!0},s.setAddEducationInvisible=function(){s.isShowAddEducation=!1},s.onShowEditableForm=function(e){var t=angular.element(document).find('form[name="vm.education'+e+'"]');t.addClass("editable-form-section")},s.onHideEditableForm=function(e){var t=angular.element(document).find('form[name="vm.education'+e+'"]');t.removeClass("editable-form-section")}}e.$inject=["$log","userEducation","EDUCATION_DEGREES","$filter"],angular.module("vmsFrontend").controller("UserEducationController",e)}(),function(){"use strict";function e(e,t){function o(){e.debug("vm.data"),e.debug(l.data),l.alert=[],t.update(l.data.password,l.data.newPassword).then(function(){l.alert.push({type:"success",data:{message:"alert.success.changed_password"}})})["catch"](function(e){l.alert.push(e)})}var l=this;l.submit=o,l.data={}}e.$inject=["$log","userPassword"],angular.module("vmsFrontend").controller("ChangePasswordController",e)}(),function(){"use strict";function e(e,t){var o=this;o.project=t.data,o.meta=t.meta,e.debug(o.project),o.isGuest=function(){return angular.isDefined(o.project)?"guest"==o.meta.role.name:!1},o.isCreator=function(){return e.debug("isCreator()"),angular.isDefined(o.project)?"creator"==o.meta.role.name:!1},o.isMember=function(){return angular.isDefined(o.project)?"member"==o.meta.role.name:!1}}e.$inject=["$log","projectData"],angular.module("vmsFrontend").controller("ProjectPanelController",e)}(),function(){"use strict";function e(e,t,o,l,a,r,n){function i(){var t=a.filter(s.hyperlinks,function(e){return!angular.isDefined(e.id)}),o=a.filter(s.hyperlinks,function(e){return angular.isDefined(e.id)});e.debug("newHyperlinks"),e.debug(t),e.debug("updateHyperlinks"),e.debug(o),l.createOrUpdate(s.project.id,t,o)}var s=this;s.project=o.data,s.hyperlinks,s.permissionOptions=r,s.froalaOptions=n,s.update=function(){var o=function(t){e.debug("project update successfully"),e.debug(t.data)},l=function(t){e.error("project update failure"),e.error(t)};t.update(s.project).then(o)["catch"](l),i()}}e.$inject=["$log","project","projectData","projectHyperlink","lodash","PERMISSION_OPTIONS","FROALA_OPTIONS"],angular.module("vmsFrontend").controller("EditProjectController",e)}(),function(){"use strict";function e(e,t,o,l,a,r,n){function i(o){a.create(o,s.hyperlinks).then(function(){e.debug("storeHyperlinks() success"),e.debug("projectId = "+o),t.go("projectDetail",{id:o})})["catch"](function(){e.debug("storeHyperlinks() failure")})}var s=this;s.permissionOptions=r,s.froalaOptions=n,s.hyperlinks=[{name:"",link:""}],s.create=function(){s.alert=[],l.create(s.project).then(function(t){e.debug(t);var o=t.id;i(o)})["catch"](function(e){s.alert.push(e)})}}e.$inject=["$log","$state","$translate","project","projectHyperlink","PERMISSION_OPTIONS","FROALA_OPTIONS"],angular.module("vmsFrontend").controller("CreateProjectController",e)}(),function(){"use strict";function e(){var e=function(e){return e?"是":"否"};return e}angular.module("vmsFrontend").filter("yesNo",e)}(),function(){"use strict";function e(e,t,o){function l(){return t({method:"GET",url:r+"/users/me"})}function a(e){return t({method:"GET",url:r+"/users/"+e+"/attending_projects"})}var r=o.apiBaseUrl,n={get:l,getAttendingProjects:a};return n}e.$inject=["$log","$http","config"],angular.module("vmsFrontend").factory("volunteerProfileEndPoint",e)}(),function(){"use strict";function e(e,t,o,l,a,r){function n(){var l=e.defer(),n=function(e){var o;t.debug("success"),t.debug(e.data),o=e.data.data,r.forEach(function(e){e.id==o.city.id&&(t.debug(e.name_zh_tw),o.city.name_zh_tw=e.name_zh_tw)}),"http://vms-openisdm.s3-website-ap-northeast-1.amazonaws.com/upload/avatars/"==o.avatar_url&&(o.avatar_url=a),l.resolve(o)},i=function(e){t.debug("error"),t.debug(e),l.reject(e)};return o.getProfile().then(n)["catch"](i),l.promise}function i(l){var a=e.defer();delete l.avatar_url,delete l.email;var r=function(e){t.debug("update profile successfully"),a.resolve(e.data)},n=function(e){t.debug("update profile failed"),a.reject(e.data)};return o.updateProfile(l).then(r)["catch"](n),a.promise}function s(){var l=e.defer(),a=function(e){t.debug("get experiences successfully"),l.resolve(e.data.experiences)},r=function(e){t.debug("get experiences failed"),l.reject(e.data)};return o.getExperiences().then(a)["catch"](r),l.promise}function c(l){var a=e.defer(),r=function(e){t.debug("add experience successfully"),a.resolve(e.data)},n=function(e){t.debug("add experience failed"),a.reject(e.data)};return o.addExperience(l).then(r)["catch"](n),a.promise}function d(l){var a=e.defer(),r=function(){t.debug("update experience successfully"),a.resolve()},n=function(e){t.debug("update experience failed"),a.reject(e.data)};return o.updateExperience(l).then(r)["catch"](n),a.promise}function u(l){var a=e.defer(),r=function(){t.debug("delete experience successfully"),a.resolve()},n=function(e){t.debug("delete experience failed"),a.reject(e.data)};return o.deleteExperience(l).then(r)["catch"](n),a.promise}function m(){var l=e.defer(),a=function(e){t.debug("get educations successfully"),l.resolve(e.data.educations)},r=function(e){t.debug("get educations failed"),l.reject(e.data)};return o.getEducations().then(a)["catch"](r),l.promise}function p(l){var a=e.defer(),r=function(e){t.debug("add education successfully"),a.resolve(e.data)},n=function(e){t.debug("add education failed"),a.reject(e.data)};return o.addEducation(l).then(r)["catch"](n),a.promise}function v(l){var a=e.defer(),r=function(){t.debug("update education successfully"),a.resolve()},n=function(e){t.debug("update education failed"),a.reject(e.data)};return o.updateEducation(l).then(r)["catch"](n),a.promise}function g(l){var a=e.defer(),r=function(){t.debug("delete education successfully"),a.resolve()},n=function(e){t.debug("delete education failed"),a.reject(e.data)};return o.deleteEducation(l).then(r)["catch"](n),a.promise}function f(l){var a=e.defer();if(t.debug("volunteer.getSkillCandidatedKeywords()"),angular.isDefined(l)&&""!=l){var r=function(e){t.debug("get skill candidated keywords successfully"),a.resolve(e.data.result)},n=function(e){t.debug("get skill candidated keywords failed"),a.reject(e.data)};o.getSkillCandidatedKeywords(l).then(r)["catch"](n)}else a.reject();return a.promise}function h(l){var a=e.defer(),r=function(e){t.debug("get equipment candidated keywords successfully"),a.resolve(e.data.result)},n=function(e){t.debug("get equipment candidated keywords failed"),a.reject(e.data)};return o.getEquipmentCandidatedKeywords(l).then(r)["catch"](n),a.promise}function b(){var l=e.defer(),a=function(e){t.debug("get skills successfully"),l.resolve(e.data.skills)},r=function(e){t.debug("get skills failed"),l.reject(e.data)};return o.getSkills().then(a)["catch"](r),l.promise}function y(l,a){var r=e.defer(),n=function(){t.debug("update skills successfully"),r.resolve()},i=function(e){t.debug("update skills failed"),r.reject(e.data)},s=[];angular.forEach(l,function(e){s.push(e.name)});var c={skills:s,existing_skill_indexes:a};return o.updateSkills(c).then(n)["catch"](i),r.promise}function w(){var l=e.defer(),a=function(e){t.debug("get equipment successfully"),l.resolve(e.data.equipment)},r=function(e){t.debug("get equipment failed"),l.reject(e.data)};return o.getEquipment().then(a)["catch"](r),l.promise}function j(l,a){var r=e.defer(),n=function(){t.debug("update equipment successfully"),r.resolve()},i=function(e){t.debug("update equipment failed"),r.reject(e.data)},s=[];angular.forEach(l,function(e){s.push(e.name)});var c={equipment:s,existing_equipment_indexes:a};return o.updateEquipment(c).then(n)["catch"](i),r.promise}function x(o){var a=e.defer();return l.getAttendingProjects(o).then(function(e){t.debug(e),a.resolve(e.data)})["catch"](function(e){t.error(e),a.reject(e)}),a.promise}var P={getProfile:n,updateProfile:i,getExperiences:s,addExperience:c,updateExperience:d,deleteExperience:u,getEducations:m,addEducation:p,updateEducation:v,deleteEducation:g,getSkillCandidatedKeywords:f,getEquipmentCandidatedKeywords:h,getSkills:b,updateSkills:y,getEquipment:w,updateEquipment:j,getAttendingProjects:x};return P}e.$inject=["$q","$log","vmsClient","volunteerProfileEndPoint","defaultAvatarPath","cities"],angular.module("vmsFrontend").factory("volunteer",e)}(),function(){"use strict";function e(){var e={restrict:"E",templateUrl:"app/components/vmsMessageDirective/vmsMessageDirective.html",scope:{data:"="},controller:t,controllerAs:"vm",bindToController:!0};return e}function t(e){function t(e){return angular.isArray(e)}var o=this;o.isArray=t,e.debug("VmsMessageController"),o.data instanceof Array&&o.data.forEach(function(t,l,a){e.debug("forEach"),e.debug(t),"info"===o.data[l].type?a[l].timeout=6500:a[l].timeout="none"})}t.$inject=["$log"],angular.module("vmsFrontend").directive("vmsMessage",e)}(),function(){"use strict";function e(e,t,o){function l(e){return t.set(o.keys.jwt,e)}function a(){return t.get(o.keys.jwt)}function r(){return t.remove(o.keys.jwt)}function n(){return f(o.keys.jwt)}function i(e){return t.set(o.keys.lastName,e)}function s(){return t.get(o.keys.lastName)}function c(){return t.remove(o.keys.lastName)}function d(e){return t.set(o.keys.userName,e)}function u(){return t.get(o.keys.userName)}function m(){return t.remove(o.keys.userName)}function p(e){return t.set(o.keys.role,e)}function v(){return t.get(o.keys.role)}function g(){return t.remove(o.keys.role)}function f(e){var o=t.keys();return-1!=o.indexOf(e)?!0:!1}function h(){return t.get(o.keys.avatarPath)}function b(e){return t.set(o.keys.avatarPath,e)}function y(){return t.remove(o.keys.avatarPath)}var w={setJwt:l,getJwt:a,removeJwt:r,jwtExists:n,setLastName:i,getLastName:s,removeLastName:c,setUsername:d,getUsername:u,removeUsername:m,getRole:v,setRole:p,removeRole:g,getAvatarPath:h,setAvatarPath:b,removeAvatarPath:y};return w}e.$inject=["$log","localStorageService","LOCAL_STORAGE_CONFIG"],angular.module("vmsFrontend").factory("vmsLocalStorage",e)}(),function(){"use strict";function e(e){function t(t){e.log("getErrorMsg"),e.log(t);var l=[];return t.forEach(function(e){"used_field"==e.code?l.push("被使用的 "+o(e)):"missing_field"==e.code?l.push("未輸入的 "+o(e)):"not_enough_password_strength"==e.code&&l.push("密碼強度不足")}),l.join(";")}function o(e){var t=e.fields;return t.join(", ")}var l={getErrorMsg:t,fieldMsg:o};return l}e.$inject=["$log"],angular.module("vmsFrontend").factory("vmsErrorMessage",e)}(),function(){"use strict";function e(e,t,o){function l(e){return t({method:"POST",url:O+"/register",data:e})}function a(e){return t({method:"POST",url:O+"/auth",data:e})}function r(){return t({method:"DELETE",url:O+"/auth"})}function n(e,o){return t({method:"GET",url:O+"/email_verification/"+e+"/"+o})}function i(){return t({method:"GET",url:O+"/users/me"})}function s(e){return t({method:"PUT",url:O+"/users/me",data:e})}function c(){return t({method:"POST",url:O+"/auth/refresh_token"})}function d(e){return t({method:"POST",url:O+"/users/me/delete",data:e})}function u(){return t({method:"GET",url:O+"/users/me/experiences"})}function m(e){return t({method:"POST",url:O+"/users/me/experiences",data:e})}function p(e){return t({method:"PUT",url:O+"/users/me/experiences",data:e})}function v(e){return t({method:"DELETE",url:O+"/users/me/experiences/"+e})}function g(){return t({method:"GET",url:O+"/users/me/educations"})}function f(e){return t({method:"POST",url:O+"/users/me/educations",data:e})}function h(e){return t({method:"PUT",url:O+"/users/me/educations",data:e})}function b(e){return t({method:"DELETE",url:O+"/users/me/educations/"+e})}function y(o){return e.debug("vmsClient.getSkillCandidatedKeywords()"),e.debug(o),t({method:"GET",url:O+"/skill_candidates/"+o})}function w(e){return t({method:"GET",url:O+"/equipment_candidates/"+e})}function j(){return t({method:"GET",url:O+"/users/me/skills"})}function x(e){return t({method:"POST",url:O+"/users/me/skills",data:e})}function P(){return t({method:"GET",url:O+"/users/me/equipment"})}function _(e){return t({method:"POST",url:O+"/users/me/equipment",data:e})}function E(e){return t({method:"POST",url:O+"/projects",data:e})}function k(){return t({method:"GET",url:O+"/managed_projects"})}function $(){return t({method:"GET",url:O+"/attending_projects"})}function C(e){return t({method:"GET",url:O+"/projects/"+e})}function A(e){return t({method:"PUT",url:O+"/projects/"+e.id,data:e})}function F(e){return t({method:"GET",url:O+"/projects/"+e+"/custom_fields"})}function S(e,o){return t({method:"POST",url:O+"/projects/"+e+"/custom_fields",data:o})}function T(e){return t({method:"POST",url:O+"/projects/"+e+"/attend",data:[]})}function D(e,o){return t({method:"POST",url:O+"/projects/"+e+"/members/bulk_custom_field_data",data:o})}function I(e){return t({method:"GET",url:O+"/projects/"+e+"/members/custom_field_data"})}function q(e){return t({method:"GET",url:O+"/projects/"+e+"/members"})}function M(e){return t({method:"GET",url:O+"/projects/"+e+"/members/all_custom_field_data"})}function U(){return t({method:"GET",url:O+"/projects"})}var O=o.apiBaseUrl,B={register:l,login:a,logout:r,emailVerification:n,getProfile:i,updateProfile:s,refreshToken:c,deleteAccount:d,getExperiences:u,addExperience:m,updateExperience:p,deleteExperience:v,getEducations:g,addEducation:f,updateEducation:h,deleteEducation:b,getSkillCandidatedKeywords:y,getEquipmentCandidatedKeywords:w,getSkills:j,updateSkills:x,getEquipment:P,updateEquipment:_,addProject:E,getManagedProjects:k,getAttendingProject:$,getProject:C,updateProject:A,getProjectCustomFields:F,updateProjectCustomField:S,attendProject:T,fillProjectCustomFieldData:D,getProjectCustomFieldData:I,getProjectMembers:q,getAllMembersCustomFieldData:M,getAllProjects:U};return B}e.$inject=["$log","$http","config"],angular.module("vmsFrontend").factory("vmsClient",e)}(),function(){"use strict";function e(){var e={restrict:"A",compile:function(e){e.append("<span class='required-star'>*</span>")}};return e}angular.module("vmsFrontend").directive("requiredLabel",e)}(),function(){"use strict";function e(){var e={restrict:"E",templateUrl:"app/components/projectHyperlinksDirective/projectHyperlinksDirective.html",scope:{projectId:"="},controller:t,controllerAs:"vm",bindToController:!0};return e}function t(e,t){var o=this;if(o.data=[],e.debug("ProjectHyperlinksDirectiveController"),e.debug("vm.projectId = "+o.projectId),angular.isDefined(o.projectId)){e.debug("vm.projectId is defined."),e.debug("vm.projectId = "+o.projectId);var l=function(e){o.data=e.data};t.getByProjectId(o.projectId).then(l)}}t.$inject=["$log","projectHyperlink"],angular.module("vmsFrontend").directive("projectHyperlinks",e)}(),function(){"use strict";function e(e,t,o){function l(e){return t({method:"GET",url:m+"/projects/"+e})}function a(){return t({method:"GET",url:m+"/projects"})}function r(){return t({method:"GET",url:m+"/managed_projects"})}function n(e){return t({method:"POST",url:m+"/projects",data:e})}function i(e,o){return t({method:"PUT",url:m+"/projects/"+e,data:o})}function s(e){return t({method:"GET",url:m+"/projects/"+e+"/hyperlinks"})}function c(e,o){return t({method:"POST",url:m+"/projects/"+e+"/hyperlinks",data:o})}function d(e,o){return t({method:"DELETE",url:m+"/projects/"+e+"/hyperlinks/"+o})}function u(e,o){return t({method:"POST",url:m+"/projects/"+e+"/hyperlinks/create_or_update_bulk",data:o})}var m=o.apiBaseUrl,p={getById:l,getAll:a,getManagedProjectList:r,create:n,update:i,getHyperlinks:s,storeHyperlinks:c,deleteHyperlinks:d,createOrUpdateHyperlinks:u};return p}e.$inject=["$log","$http","config"],angular.module("vmsFrontend").factory("projectEndpoint",e)}(),function(){"use strict";function e(e,t,o,l){function a(e){var a=t.defer();return o.getById(e).then(function(e){a.resolve(e.data)})["catch"](function(e){var t=l.convertToDanger(e.data);a.reject(t)}),a.promise}function r(){var e=t.defer();return o.getAll().then(function(t){e.resolve(t.data)})["catch"](function(t){e.reject(t)}),e.promise}function n(){var e=t.defer();return o.getManagedProjectList().then(function(t){e.resolve(t.data)})["catch"](function(t){var o=l.convertToDanger(t.data);e.reject(o)}),e.promise}function i(e){var a=t.defer();return o.create(e).then(function(e){a.resolve(e.data)})["catch"](function(e){var t=l.convertToDanger(e.data);a.reject(t)}),a.promise}function s(e){var a=t.defer();return o.update(e.id,e).then(function(e){a.resolve(e.data)})["catch"](function(e){var t=l.convertToDanger(e.data);a.reject(t)}),a.promise}function c(e){return $http({method:"GET",url:apiBaseUrl+"/projects/"+e+"/hyperlinks"})}function d(e,t){return $http({method:"POST",url:apiBaseUrl+"/projects/"+e+"/hyperlinks",data:t})}function u(e,t){return $http({method:"DELETE",url:apiBaseUrl+"/projects/"+e+"/hyperlinks/"+t})}function m(e,t){return $http({method:"POST",url:apiBaseUrl+"/projects/"+e+"/hyperlinks/create_or_update_bulk",data:t})}var p={getById:a,getAll:r,getManagedProjectList:n,create:i,update:s,getHyperlinks:c,storeHyperlinks:d,deleteHyperlinks:u,createOrUpdateHyperlinks:m};return p}e.$inject=["$log","$q","projectEndpoint","alertMessage"],angular.module("vmsFrontend").factory("project",e)}(),function(){"use strict";function e(e,t){e.debug("permissionText");var o=function(o){var l=null;return e.debug(o),angular.forEach(t,function(e){e.value==o&&(l=e.name)}),e.debug(l),l};return o}e.$inject=["$log","PERMISSION_OPTIONS"],angular.module("vmsFrontend").filter("permissionText",e)}(),function(){"use strict";function e(){function e(e,l,a,r,n){function i(){l.logout(),t=void 0,o=void 0,r.go("login")}function s(){return l.getRole()}function c(){return"manager"==l.getRole()}function d(){return"volunteer"==l.getRole()}function u(){l.switchRole("volunteer"),n.clear(),n.success("現在身份為志工",{closeButton:!0}),r.go("showAllProjects")}function m(){l.switchRole("manager"),n.clear(),n.success("現在身份為專案管理員",{closeButton:!0}),r.go("managedProjectList")}function p(){return angular.isDefined(t)&&null!=t||(t=a.getAvatarPath()),t}function v(){return angular.isDefined(o)&&null!=o||(o=a.getLastName()),o}var g=this;g.userAuthentication=l,g.logout=i,g.getRole=s,g.isManagerRole=c,g.isVolunteerRole=d,g.switchToVolunteer=u,g.switchToManager=m,g.getAvatarPath=p,g.getLastName=v}e.$inject=["$log","userAuthentication","vmsLocalStorage","$state","toastr"];var t,o,l={restrict:"E",templateUrl:"app/components/navbar/navbar.html",scope:{creationDate:"="},controller:e,controllerAs:"vm",bindToController:!0};return l}angular.module("vmsFrontend").directive("vmsNavbar",e)}(),function(){"use strict";function e(e){var t=function(t){return e.trustAsHtml(t)};return t}e.$inject=["$sce"],angular.module("vmsFrontend").filter("htmlize",e)}(),function(){"use strict";function e(){return function(e,t){for(var o=0;o<e.length;o++)if(e[o].id==t)return o;return null}}angular.module("vmsFrontend").filter("getIndexById",e)}(),function(){"use strict";function e(){return function(e,t){for(var o=0;o<e.length;o++)if(e[o].id==t)return e[o];return null}}angular.module("vmsFrontend").filter("getById",e)}(),function(){"use strict";function e(e,t){return{require:"ngModel",link:function(o,l,a,r){r.$parsers.push(function(o){var l=e("date")(o,"yyyy");return t.debug("=== formatYear directive ==="),t.debug(l),l!=o&&(r.$setViewValue(l),r.$render()),l})}}}e.$inject=["$filter","$log"],angular.module("vmsFrontend").directive("formatYear",e)}(),function(){"use strict";function e(e,t){var o=function(o){var l=new Date(o),a=e("date")(l,"yyyy/MM/dd hh:mm","UTC");return t.debug("=== formatDateTime directive ==="),t.debug(a),a};return o}e.$inject=["$filter","$log"],angular.module("vmsFrontend").filter("formatDateTime",e)}(),function(){"use strict";function e(){var e={restrict:"E",templateUrl:"app/components/editableProjectHyperlinksDirective/editableProjectHyperlinksDirective.html",scope:{projectId:"=",data:"="},controller:t,controllerAs:"vm",bindToController:!0};return e}function t(e,t){var o=this;if(o.data=[],0==o.data.length&&o.data.push({name:"",link:""}),e.debug("EditableProjectHyperlinksDirectiveController"),e.debug("vm.projectId = "+o.projectId),angular.isDefined(o.projectId)){e.debug("vm.projectId is defined."),e.debug("vm.projectId = "+o.projectId);var l=function(e){o.data=e.data};t.getByProjectId(o.projectId).then(l)}o.remove=function(l){e.debug("remove a project hyperlink"),e.debug(l);var a=function(){o.data.splice(l,1),e.debug(o.data)},r=function(t){e.error(t)};angular.isDefined(o.data[l].id)?t.dropByProjectIdAndHyperlinkId(o.projectId,o.data[l].id).then(a)["catch"](r):o.data.splice(l,1)},o.append=function(){o.data.push({name:"",link:""})}}t.$inject=["$log","projectHyperlink"],angular.module("vmsFrontend").directive("editableProjectHyperlinks",e)}(),function(){"use strict";function e(e,t){var o=function(o){var l;return angular.forEach(e,function(e){e.value==o&&(l=e.text)}),t.debug(l),l};return o}e.$inject=["EDUCATION_DEGREES","$log"],angular.module("vmsFrontend").filter("educationDegree",e)}(),function(){"use strict";function e(e){function t(e){function t(){angular.isDefined(l.metadata)&&0!=l.metadata.length||(e.debug("push....."),l.metadata={options:[{}]},e.debug(l.metadata)),l.hoverDelete=function(e){return option.showDelete=!option.showDelete},l.appendOption=function(){l.metadata.options.push({})},l["delete"]=function(t){e.debug("=== vm.delete() ==="),e.debug(t),l.metadata.options.splice(t,1)}}function o(e){return"app/components/customFieldDirective/"+e+"FilledFieldType.html"}var l=this;e.debug(l),l.getTemplateUrl=function(){switch(l.type){case"RADIO_BUTTON":return t(),o("radioButton");case"TEXT":return o("text");default:return null}}}t.$inject=["$log"];var o={template:'<div class="form-group"><div class="row" ng-include="vm.getTemplateUrl()"></div></div>',restrict:"E",scope:{type:"=",title:"=",fieldData:"=",metadata:"="},controller:t,controllerAs:"vm",bindToController:!0};return o}e.$inject=["$compile"],angular.module("vmsFrontend").directive("fillCustomFieldType",e)}(),function(){"use strict";function e(e){function t(){var e=this;e.getTemplateUrl=function(){return"app/components/customFieldDirective/"+e.type+"FieldTypePreview.html"}}var o={template:'<ng-include src="vm.getTemplateUrl()"/>',restrict:"E",scope:{type:"=",attribute:"="},controller:t,controllerAs:"vm",bindToController:!0};return o}e.$inject=["$compile"],angular.module("vmsFrontend").directive("customFieldTypePreview",e)}(),function(){"use strict";function e(e){function t(e){function t(){angular.isDefined(l.metadata)&&0!=l.metadata.length||(e.debug("push....."),l.metadata={options:[{}]},e.debug(l.metadata)),l.hoverDelete=function(e){return option.showDelete=!option.showDelete},l.appendOption=function(){l.metadata.options.push({})},l["delete"]=function(t){e.debug("=== vm.delete() ==="),e.debug(t),l.metadata.options.splice(t,1)}}function o(e){return"app/components/customFieldDirective/"+e+"FieldType.html"}var l=this;e.debug(l),l.getTemplateUrl=function(){switch(l.type){case"radioButton":return e.debug("=== radioButton ==="),t(),o(l.type);default:return null}}}t.$inject=["$log"];var o={template:'<ng-include src="vm.getTemplateUrl()"/>',restrict:"E",scope:{type:"=",metadata:"="},controller:t,controllerAs:"vm",bindToController:!0};return o}e.$inject=["$compile"],angular.module("vmsFrontend").directive("customFieldType",e)}(),function(){"use strict";function e(){var e={restrict:"E",templateUrl:"app/components/customFieldDirective/customFieldDirective.html",scope:{data:"="},controller:t,controllerAs:"vm",bindToController:!0};return e}function t(e,t,o,l){function a(){switch(s.data.type=s.type.value,e.debug("customFieldData"),e.debug(s.data),s.type.value){case"RADIO_BUTTON":r(s.data.metadata)}n(),e.debug("vm.data"),e.debug(s.data),o.storeOrUpdateByProjectId(s.data,c)}function r(e){angular.forEach(e.options,function(e,t){e.value=t})}function n(){angular.isDefined(s.data.created_at)&&delete s.data.created_at,angular.isDefined(s.data.updated_at)&&delete s.data.updated_at}function i(){e.debug("=== setFieldType() ==="),e.debug(s.data),angular.isDefined(s.data.type)?(e.debug("=== type is defined ==="),angular.forEach(l,function(e){s.data.type==e.value&&(s.type=e)})):(e.debug("=== type is not defined ==="),s.type={label:"文字",typeName:"text",value:"TEXT"})}var s=this,c=t.projectId;s.typeOptions=l,s.store=a,angular.element(document).ready(i)}t.$inject=["$log","$stateParams","projectCustomField","CUSTOM_FIELD_TYPES"],angular.module("vmsFrontend").directive("customField",e)}(),function(){"use strict";function e(e,t){var o=function(e,o,l){function a(){t.debug("=== transformRadioButton ==="),t.debug("### input ###"),t.debug(e),t.debug("### metadata ###"),t.debug(l),angular.forEach(l.options,function(o){t.debug(o),o.value==e.option.value&&(r=o.display_name,t.debug("--- equal ---"))})}var r;switch(o){case"RADIO_BUTTON":a();break;case"TEXT":r=e.value;break;default:r="NONE"}return t.debug("### type ###"),t.debug(o),t.debug("### transformedInput ###"),t.debug(r),r};return o}e.$inject=["$filter","$log"],angular.module("vmsFrontend").filter("customFieldDataToText",e)}(),function(){"use strict";function e(e){function t(){return e.jwtExists()}var o={identity:t};return o}e.$inject=["vmsLocalStorage"],angular.module("vmsFrontend").factory("authPrinciple",e)}(),function(){"use strict";function e(){var e={restrict:"E",templateUrl:"app/components/attendingProjectsDirective/showAttendingProjectDirective.html",scope:{memberId:"="},controller:t,controllerAs:"vm",bindToController:!0};return e}function t(e,t){var o=this;e.debug("ShowAttendingProjectsController"),t.getAttendingProjects(o.memberId).then(function(t){e.debug("getAttendingProjects().then()"),o.data=t.data,e.debug("vm.data"),e.debug(o.data)})}t.$inject=["$log","volunteer"],angular.module("vmsFrontend").directive("showAttendingProjects",e)}(),function(){"use strict";function e(e,t){function o(o,l){e.debug("getExistingIndexes"),e.debug(o),e.debug(l);var a=[];return angular.forEach(o,function(o){e.debug("value"),e.debug(o);var r=t.findIndex(l,function(e){return e.name==o.name});e.debug("index"),e.debug(r),-1!=r&&(e.debug("found"),e.debug(r),a.push(r))}),a}var l={getExistingIndexes:o};return l}e.$inject=["$log","lodash"],angular.module("vmsFrontend").factory("arrayHelpersService",e)}(),function(){"use strict";function e(e){function t(t){e.debug("convertToValidationDanger()");var o=[];angular.forEach(t,function(e,t){var o={field:t,message:[]};e.forEach(function(e){o.message.push("alert.danger."+e)}),this.push(o)},o);var l={type:"danger",data:o};return l}function o(t){e.debug("convertToDanger()");var o=[];t.forEach(function(e){o.push("alert.danger."+e)});var l={type:"danger",data:{message:o}};return e.debug(l),l}var l={convertToValidationDanger:t,convertToDanger:o};return l}e.$inject=["$log"],angular.module("vmsFrontend").factory("alertMessage",e)}(),function(){"use strict";function e(){var e=this;e.aboutVMS="志工管理系統(Volunteer Management System, VMS)"}angular.module("vmsFrontend").controller("AboutController",e)}(),function(){"use strict";function e(e,t,o,l,a,r,n){n.theme="bs3";var i=o.$on("$stateChangeStart",function(t,l,a){e.debug("=== $stateChangeStart ==="),e.debug("###### state debug ######"),e.debug(l),e.debug(a),e.debug("##########"),o.toState=l}),s=o.$on("$stateChangeError",function(t,o,l,a,r,n){e.error("stateChangeLoggingError"),e.error(t),e.error(n)}),c=o.$on("$locationChange",function(e){e.preventDefault(),r.sync()}),d=o.$on("$stateChangeSuccess",function(){document.body.scrollTop=document.documentElement.scrollTop=0});o.$on("$destroy",i),o.$on("$destroy",c),o.$on("$destroy",d),o.$on("$destroy",s),e.debug("runBlock end")}e.$inject=["$log","vmsLocalStorage","$rootScope","$state","$stateParams","$urlRouter","editableOptions"],angular.module("vmsFrontend").run(e)}(),function(){"use strict";function e(e,t){function o(e,t,o){var l=e.projectId,a=function(e){return e};return o.getById(l).then(a)}o.$inject=["$stateParams","$log","project"],e.state("site",{"abstract":!0,resolve:{authorize:["userAuthentication","$log","$state",function(e,t,o){t.debug("=== authorize === ");var l=function(){t.debug("successCallback()")},a=function(){t.debug("failureCallback()"),o.go("login")};return e.authorize().then(l)["catch"](a)}]}}).state("user",{parent:"site",url:"/user"}).state("login",{url:"/login",views:{"mainContent@":{templateUrl:"app/user/login/userLogin.html",controller:"UserLoginController",controllerAs:"vm"}}}).state("registerPrivacy",{url:"/register-privacy",views:{"mainContent@":{templateUrl:"app/user/register/registerPrivacy.html"}}}).state("register",{url:"/register",views:{"mainContent@":{templateUrl:"app/user/register/userRegister.html",controller:"UserRegisterController",controllerAs:"vm"}}}).state("registerSuccess",{parent:"site",url:"/register/success?last_name&email",params:{last_name:{value:"志工"},email:{value:"註冊"}},views:{"mainContent@":{templateUrl:"app/user/register/success/userRegisterSuccess.html",controller:"UserRegisterSuccessController",controllerAs:"vm"}}}).state("forgotPassword",{url:"/forgot-password",views:{"mainContent@":{templateUrl:"app/user/forgotPassword/forgotPassword.html",controller:"ForgotPasswordController",controllerAs:"vm"}}}).state("resetPassword",{url:"/reset-password?token&email",params:{token:{value:"none"},email:{value:"none"}},views:{"mainContent@":{templateUrl:"app/user/resetPassword/resetPassword.html",controller:"ResetPasswordController",controllerAs:"vm"}}}).state("profile",{parent:"site",url:"/profile",views:{"mainContent@":{templateUrl:"app/user/profile/show/showUserProfile.html",controller:"ShowUserProfileController",controllerAs:"vm"}}}).state("rootEditProfile",{parent:"site",url:"/profile",views:{"mainContent@":{templateUrl:"app/user/profile/update/updateUserProfile.html"}}}).state("rootEditProfile.edit",{url:"/edit",views:{profileContent:{templateUrl:"app/user/profile/update/updateAboutAndContact.html",
controller:"UpdateUserProfileController",controllerAs:"vm"}}}).state("rootEditProfile.aboutContact",{url:"/edit/about",views:{profileContent:{templateUrl:"app/user/profile/update/updateAboutAndContact.html",controller:"UpdateUserProfileController",controllerAs:"vm"}}}).state("rootEditProfile.experienceEducation",{url:"/edit/experience-education",views:{profileContent:{templateUrl:"app/user/experienceAndEducation.html"},"experienceContent@rootEditProfile.experienceEducation":{templateUrl:"app/user/experience/userExperience.html",controller:"UserExperienceController",controllerAs:"vm"},"educationContent@rootEditProfile.experienceEducation":{templateUrl:"app/user/education/userEducation.html",controller:"UserEducationController",controllerAs:"vm"}}}).state("rootEditProfile.skillEquipment",{url:"/edit/skill-equipment",views:{profileContent:{templateUrl:"app/user/skillEquipment/edit/userEditSkillEquipment.html",controller:"UserEditSkillEquipmentController",controllerAs:"vm"}}}).state("rootEditProfile.changePassword",{url:"/change-password",views:{profileContent:{templateUrl:"app/user/changePassword/changePassword.html",controller:"ChangePasswordController",controllerAs:"vm"}}}).state("emailVerification",{parent:"site",url:"/email-verification?email&verification_token",params:{email:{value:""},verification_token:{value:""}},views:{"mainContent@":{templateUrl:"app/user/email/verify/verifyUserEmail.html",controller:"VerifyUserEmailController",controllerAs:"vm"}}}).state("introduction",{url:"/",views:{"introductionContent@":{templateUrl:"app/about/about.html",controller:"AboutController",controllerAs:"vm"}}}).state("copyright",{parent:"site",url:"/copyright",views:{"mainContent@":{templateUrl:"app/copyrightPage/copyright.html"}}}).state("createProject",{parent:"site",url:"/projects/create",views:{"mainContent@":{templateUrl:"app/project/create/createProject.html",controller:"CreateProjectController",controllerAs:"vm"}}}).state("managedProjectList",{parent:"site",url:"/projects/show/managed",views:{"mainContent@":{templateUrl:"app/project/list/managed/managedProjectList.html",controller:"ManagedProjectListController",controllerAs:"vm"}}}).state("attendingProjectList",{parent:"site",url:"/projects/show/attending",views:{"mainContent@":{templateUrl:"app/project/list/attending/attendingProjectList.html",controller:"AttendingProjectListController",controllerAs:"vm"}}}).state("project",{parent:"site",url:"/manage-project",views:{"mainContent@":{templateUrl:"app/project/projectTplPage.html"}}}).state("project.show",{url:"/show/:projectId",views:{panel:{templateUrl:"app/project/panel/projectPanel.html",controller:"ProjectPanelController",controllerAs:"vm"},container:{templateUrl:"app/project/detail/managed/managedProjectDetail.html",controller:"ManagedProjectDetailController",controllerAs:"vm"}},resolve:{projectData:o,members:["$stateParams","vmsClient",function(e,t){var o=e.projectId,l=function(e){return e.data};return t.getProjectMembers(o).then(l)}]}}).state("project.edit",{url:"/edit/:projectId",views:{panel:{templateUrl:"app/project/panel/projectPanel.html",controller:"ProjectPanelController",controllerAs:"vm"},container:{templateUrl:"app/project/edit/editProject.html",controller:"EditProjectController",controllerAs:"vm"}},resolve:{projectData:o,members:["$stateParams","vmsClient",function(e,t){var o=e.projectId,l=function(e){return e.data};return t.getProjectMembers(o).then(l)}]}}).state("project.manageCustomField",{url:"/:projectId/manage-custom-field",views:{panel:{templateUrl:"app/project/panel/projectPanel.html",controller:"ProjectPanelController",controllerAs:"vm"},container:{templateUrl:"app/project/customField/manage/manageProjectCustomField.html",controller:"ManageProjectCustomFieldsController",controllerAs:"vm"}},resolve:{projectData:o,members:["$stateParams","vmsClient",function(e,t){var o=e.projectId,l=function(e){return e.data};return t.getProjectMembers(o).then(l)}]}}).state("project.manageMembers",{url:"/:projectId/manage-members",views:{panel:{templateUrl:"app/project/panel/projectPanel.html",controller:"ProjectPanelController",controllerAs:"vm"},container:{templateUrl:"app/project/member/list/projectMemberList.html",controller:"ProjectMemberListController",controllerAs:"vm"}},resolve:{projectData:o,membersData:["$stateParams","vmsClient",function(e,t){var o=e.projectId,l=function(e){return e.data};return t.getAllMembersCustomFieldData(o).then(l)}]}}).state("showAllProjects",{parent:"site",url:"/projects/show/all",views:{"mainContent@":{templateUrl:"app/project/list/all/allProjectList.html",controller:"AllProjectListController",controllerAs:"vm"}},resolve:{projects:["project","$log",function(e,t){t.debug("projectList resolve");var o=function(e){return t.debug("projectList onSuccess()"),t.debug(e),e.data},l=function(){t.debug("projectList onError()")};return e.getAll().then(o)["catch"](l)}]}}).state("projectDetail",{parent:"site",url:"/projects/:id/show",views:{"mainContent@":{templateUrl:"app/project/detail/public/projectDetail.html",controller:"ProjectDetailController",controllerAs:"vm"}}}).state("fillProjectCustomFieldData",{parent:"site",url:"/projects/:projectId/fill-custom-fields",views:{"mainContent@":{templateUrl:"app/project/customField/fill/fillCustomFields.html",controller:"FillCustomFieldsController",controllerAs:"vm"}}}),t.otherwise("/")}e.$inject=["$stateProvider","$urlRouterProvider"],angular.module("vmsFrontend").config(e)}(),function(){"use strict";angular.module("vmsFrontend").constant("malarkey",malarkey).constant("moment",moment).constant("fieldName",{first_name:"姓氏",last_name:"名字",username:"帳號",password:"密碼",email:"電子郵件"}).constant("defaultAvatarPath","./assets/images/profile-default-avatar.png").constant("LOCAL_STORAGE_CONFIG",{keys:{jwt:"jwt_token",userName:"user_name",lastName:"last_name",role:"role",avatarPath:"avatar_path"}}).constant("BROADCAST_EVENTS_LIST",{AUTHENTICATED_SUCCESS_EVENT:"$authenticatedSuccessEvent",AUTHENTICATED_FAILURE_EVENT:"$authenticatedFailureEvent"}).constant("cities",[{id:2,name_zh_tw:"臺北市"},{id:12,name_zh_tw:"新北市"},{id:22,name_zh_tw:"桃園縣"},{id:32,name_zh_tw:"臺中市"},{id:42,name_zh_tw:"高雄市"},{id:52,name_zh_tw:"臺南市"},{id:62,name_zh_tw:"新竹市"},{id:72,name_zh_tw:"嘉義市"},{id:82,name_zh_tw:"基隆市"},{id:92,name_zh_tw:"新竹市"},{id:102,name_zh_tw:"苗栗市"},{id:112,name_zh_tw:"彰化縣"},{id:122,name_zh_tw:"南投縣"},{id:132,name_zh_tw:"雲林縣"},{id:142,name_zh_tw:"嘉義縣"},{id:152,name_zh_tw:"屏東縣"},{id:162,name_zh_tw:"宜蘭縣"},{id:172,name_zh_tw:"花蓮縣"},{id:182,name_zh_tw:"臺東線"},{id:192,name_zh_tw:"金門縣"},{id:202,name_zh_tw:"連江縣"},{id:212,name_zh_tw:"澎湖縣"}]).constant("PERMISSION_OPTIONS",[{name:"project.permissions.choose_permission",value:""},{name:"project.permissions.all_users",value:0},{name:"project.permissions.registered_users",value:1},{name:"project.permissions.members",value:2}]).constant("EDUCATION_DEGREES",[{value:1,text:"education.degrees.elementary"},{value:2,text:"education.degrees.junior"},{value:3,text:"education.degrees.high"},{value:4,text:"education.degrees.bachelor"},{value:5,text:"education.degrees.master"},{value:6,text:"education.degrees.phd"}]).constant("CUSTOM_FIELD_TYPES",[{label:"文字",typeName:"text",value:"TEXT"},{label:"單選按鈕",typeName:"radioButton",value:"RADIO_BUTTON"}]).constant("FROALA_OPTIONS",{language:"en_gb",heightMin:200,heightMax:500})}(),function(){"use strict";function e(e,t,o,l,a){o.setPrefix("vms");for(var r=["apiKeyHttpInterceptor","jwtHttpInterceptor","refreshJwtHttpInterceptor"],n=0;n<r.length;n++)l.interceptors.push(r[n]);e.debugEnabled(!0),t.allowHtml=!0,t.timeOut=3e3,t.positionClass="toast-top-right",t.preventDuplicates=!0,t.progressBar=!0,a.useStaticFilesLoader({prefix:"assets/lang/locale-",suffix:".json"}),angular.isDefined(window.navigator.language)&&a.preferredLanguage(window.navigator.language)}e.$inject=["$logProvider","toastrConfig","localStorageServiceProvider","$httpProvider","$translateProvider"],angular.module("vmsFrontend").config(e)}(),angular.module("vmsFrontend.config",[]).constant("config",{apiBaseUrl:"https://vms-dev.herokuapp.com/api",apiKey:"581dba93a4dbafa42a682d36b015d8484622f8e3543623bec5a291f67f5ddff1"}),angular.module("vmsFrontend").run(["$templateCache",function(e){e.put("app/about/about.html",'<div class=header-basic><h1>關於志工管理系統</h1><h2>All for one, one for all.</h2></div><div class=container><div id=introduction-container class=row><!-- <div class="col-md-12">\n			<h4 class="text-center">透過網路，每個人都可以成為志工，透過網路救災，每個人都可以為這個世界貢獻一份心力。</h4>\n			<h4 class="text-center">資料、資訊、感知、決策、知識，我們透過世界傳遞智慧，透過傳遞智慧改變世界。</h4>\n		</div> --><div class="col-md-6 col-xs-12"><uib-carousel active=active interval=2500 no-wrap=noWrapSlides><uib-slide><img ng-src=./assets/images/2004-tsunami.jpg style="margin:auto; height: 290px"><div class=carousel-caption><h4>蘇門答臘地震</h4><p>2004年12月26日，規模9.3大地震侵襲印尼，引發災難性大海嘯，造成逾29萬人喪命，印度與斯里蘭卡工程師開發自由開放軟體：SAHANA，以整合救災資源</p></div></uib-slide><uib-slide><img ng-src=https://c1.staticflickr.com/3/2363/1515287285_1c1fd6a9b1_o.jpg style="margin:auto; height: 290px"><div class=carousel-caption><h4>肯亞災難</h4><p>2007年12月27日，肯亞總統選舉後發生暴動，逾千人喪命，25萬人流離失所，肯亞工程師開發自由開放系統：USHAHIDI，蒐集各類災情資訊</p></div></uib-slide><uib-slide><img ng-src=https://c1.staticflickr.com/1/513/19445213576_7e0d9312d1_b.jpg style="margin:auto; height: 290px"><div class=carousel-caption><h4>海地、尼泊爾地震</h4><p>2010年1月12日，海地發生7級大地震、2015年5月12日，尼泊爾發生同樣7級大地震，這兩次大地震，各國網友透過開放街圖(OpenStreetMap)繪製地圖協助救災</p></div></uib-slide></uib-carousel><!-- <div class="thumbnail">\n				<img src="./assets/images/2004-tsunami.jpg">\n				<div class="caption">\n					<h4>蘇門答臘地震</h4>\n					<p>2004年12月26日，規模9.3大地震侵襲印尼，引發災難性大海嘯，造成逾29萬人喪命，印度與斯里蘭卡工程師開發自由開放軟體：SAHANA，以整合救災資源</p>\n				</div>\n			</div> --></div><div class="col-md-6 col-xs-12"><h4>透過網路，每個人都可以成為志工，透過網路救災，每個人都可以為這個世界貢獻一份心力。</h4><h4>資料、資訊、感知、決策、知識，我們透過世界傳遞智慧，透過傳遞智慧改變世界。</h4><div class=row><div class="col-md-12 col-xs-12"><div style="margin-top: 30px"><button class="btn btn-lg btn-primary center-block" ui-sref=registerPrivacy>加入我們</button><p class=text-center><em>點擊上面按鈕加入我們</em></p></div></div></div></div><!-- <div class="col-md-4 col-xs-12">\n	 		<div class="thumbnail">\n				<img src="https://c1.staticflickr.com/3/2363/1515287285_1c1fd6a9b1_o.jpg">\n				<div class="caption">\n					<h4>肯亞災難</h4>\n					<p>2007年12月27日，肯亞總統選舉後發生暴動，逾千人喪命，25萬人流離失所，肯亞工程師開發自由開放系統：USHAHIDI，蒐集各類災情資訊</p>\n				</div>\n			</div>\n		</div> --><!-- <div class="col-md-5 col-md-offset-1 col-xs-12">\n			 <div class="thumbnail">\n				<img src="https://c1.staticflickr.com/1/513/19445213576_7e0d9312d1_b.jpg">\n				<div class="caption">\n					<h4>海地、尼泊爾地震</h4>\n					<p>2010年1月12日，海地發生7級大地震、2015年5月12日，尼泊爾發生同樣7級大地震，這兩次大地震，各國網友透過開放街圖(OpenStreetMap)繪製地圖協助救災</p>\n				</div>\n			</div>\n		 </div> --><!-- <div class="col-md-12">\n			<button class="btn btn-lg btn-primary center-block" ui-sref="registerPrivacy">成為志工</button>\n			<p class="text-center"><em>點擊上面按鈕成為志工</em></p>\n		</div> --></div></div><div class=ad-container><div><img class=img-responsive src=http://www.earth.sinica.edu.tw/images/bg-top.jpg></div><div class=ad-container-text><h2>合作單位 - 地球科學研究所 <span class="glyphicon glyphicon-globe" aria-hidden=true></span></h2><h3>台灣的地震現況</h3><p>台灣位在歐亞與菲律賓海板塊之間的活動聚合邊界上，地殼變形劇烈，地震活動頻繁。藉由高品質的地震監測網，氣象局有能力在地震發生後的 20 秒內掌握地震的位置、規模和各地震度等資訊；我們也反演台灣即時寬頻波形記錄，快速取得地震斷層的錯動機制；另外台大廣布加速度計，可大幅提高觀測震度的空間解析度。</p><h3>我們的目的</h3><p>在中研院的主題計畫下，我們已經建置完成一套整合氣象局地震速報與學界即時科學成果的資訊系統，作為科學討論與教育推廣的平台。目前，我們著重在開發群眾外包 (crowdsourcing) 系統，收集群眾資訊，並將這些透過網路回報的資訊轉換成民眾可理解的「網路震度」， 提高民眾對地震災害的危機意識，並推廣公民地震學 (citizen seismology)。</p><h3>想要有您的參與</h3><p>我們將招募熱血專業志工，訓練如何辨識與地震相關的地質災害並進行科學描述，並與資訊科學所合作開發志工管理系統，在顯著地震發生後調度志工在安全的情況下回報地震地表災害的科學參數，協助斷定對應的孕震構造與評估後續的潛在危害。這是第一次由學界主導，在地震時和地震後收集群眾報告，彌補觀測系統的不足之處，並充實地震科學的現地資訊，提供防災應變參考。</p></div><a class="btn btn-primary btn-lg" target=_blank href=http://tec.earth.sinica.edu.tw/new_web/workshop>瀏覽專案</a></div><div class=flex-container><h2>Volunteer Management System, VMS</h2><div id=feature-text><p><span class="glyphicon glyphicon-wrench" aria-hidden=true></span> 志工管理系統 (Volunteer Management System, VMS) 能協助專案管理員在志工外包專案中有效率且彈性的管理志工。每一位專案管理員對於志工的管理需求可能都不同，志工管理系統最大的特點將會是靈活與彈性，專案管理員將可以自由地定義需要的志工特點，也可以依照自己的管理需求選擇所需要的功能模組。</p><p><span class="glyphicon glyphicon-user" aria-hidden=true></span> 志工管理系統將會是開放原始碼軟體，有需求的單位可以自建版本之外，也可提供直接的網頁操作，若單位已擁有自己的災害平台，也可直接串接志工管理系統所提供的功能模組。</p></div></div>'),e.put("app/copyrightPage/copyright.html",'<div id=main-content class="col-md-12 col-xs-12 col-sm-12 col-lg-12"><h1>版權宣告</h1><hr class=hr><p class=lead>以下為使用他人之著作</p><table class="table table-striped"><thead><tr><th>著作名稱</th><th>著作</th><th>作者/來源</th><th>授權方式</th></tr></thead><tbody><tr><td>2004-tsunami.jpg</td><td><img src=./assets/images/2004-tsunami.jpg width=200></td><td>David Rydevik (email: david.rydevik@gmail.com), Stockholm, Sweden. <a href=https://en.wikipedia.org/wiki/File:2004-tsunami.jpg target=_blank>來源網址</a></td><td>Public domain</td></tr><tr><td>ODM Portrait</td><td><img src=https://c1.staticflickr.com/3/2363/1515287285_1c1fd6a9b1_o.jpg width=200></td><td>DEMOSH <a href=https://www.flickr.com/photos/44222307@N00/1515287285/ target=_blank>來源網址</a></td><td>CC BY 2.0</td></tr><tr><td>"Die Suche nach Überlebenden" Nepal April/Mai 2015</td><td><img src=https://c1.staticflickr.com/1/513/19445213576_7e0d9312d1_b.jpg width=200></td><td>Wiesbaden112.de <a href=https://www.flickr.com/photos/feuerwehrwiesbaden/19445213576 target=_blank>來源網址</a></td><td>CC BY-NC-ND 2.0</td></tr></tbody></table></div>'),e.put("app/project/manageProjectMembers.html",'<div class=modal-header><h3 class=modal-title>管理專案成員</h3></div><div class=modal-body></div><div class=modal-footer><button class="btn btn-danger" type=button ng-click=vm.ok()>確認刪除帳號</button> <button class="btn btn-default" type=button ng-click=vm.cancel()>取消</button></div>'),e.put("app/project/projectMemberVolunteerList.html",'<div class=row><div ng-repeat="member in vm.membersList.data track by $index"><div class="col-md-1 col-lg-1">{{ member.attributes.username }}</div><div class="col-md-1 col-lg-1">{{ member.first_name }} {{ member.last_name}}</div></div></div>'),e.put("app/project/projectMembers.html",""),e.put("app/project/projectTplPage.html",'<div class="col-xs-12 col-sm-10 col-sm-offset-1"><h1>專案</h1></div><div id=main-content class="top-line col-xs-12 col-sm-10 col-sm-offset-1"><div class=row><div class=col-md-3><div class="anim-in-out anim-fade" data-anim-speed=1000 ui-view=panel></div></div><div class=col-md-9><div class="anim-in-out anim-fade" data-anim-speed=1000 ui-view=container></div></div></div></div>'),e.put("app/user/experienceAndEducation.html",'<div class="anim-in-out anim-fade" data-anim-speed=1000 ui-view=experienceContent></div><div class="anim-in-out anim-fade" data-anim-speed=1000 ui-view=educationContent></div>'),e.put("app/components/attendingProjectsDirective/showAttendingProjectDirective.html",'<div class=row><div class="col-md-12 col-lg-12"><table class="table table-striped"><tr><th>專案名稱</th><th>加入時間</th></tr><tr ng-repeat="attending in vm.data"><td>{{ attending.project.name }}</td><td>{{ attending.attending_at.date | formatDateTime }}</td></tr></table></div></div>'),e.put("app/components/customFieldDataToTextFilter/customFieldDataToText.html",""),e.put("app/components/customFieldDirective/customFieldDirective.html",'<div class=row ng-mouseenter="actionVisible=true" ng-mouseleave="actionVisible=false"><div class="project-custom-field-preview left-line col-md-12 col-lg-12"><div class=row-eq-height><custom-field-type-preview class="col-md-10 col-lg-10" type=vm.type.typeName attribute=vm.data></custom-field-type-preview><div class="col-md-2 col-lg-2"><div class=custom-field-action ng-show=actionVisible><span class="glyphicon glyphicon-pencil" aria-hidden=true ng-click="contentVisible=true"></span></div></div></div></div><div class="project-custom-field-wrapper col-md-12 col-lg-12" ng-show=contentVisible><div class=project-custom-field-content><form><div class=row><div class="form-group col-md-12 col-lg-12"><div class="row row-eq-height"><label class="control-label col-md-2 col-lg-2" for=field-name>欄位名稱</label><div class="col-md-10 col-lg-10"><input id=field-name type=text class=form-control placeholder=欄位名稱 ng-model=vm.data.name required></div></div></div></div><div class=row><div class="form-group col-md-12 col-lg-12"><div class="row row-eq-height"><label class="col-md-2 col-lg-2 control-label" for=field-description>欄位描述</label><div class="col-md-10 col-lg-10"><input id=field-description type=text class=form-control placeholder=欄位描述 ng-model=vm.data.description required></div></div></div></div><div class=row><div class="form-group col-md-6 col-lg-6"><div class=row-eq-height><label class="col-md-4 col-lg-4 control-label" for=field-type>欄位類型</label><div class="col-md-8 col-lg-8"><select name=field-type id=field-type class=form-control ng-options="option.label for option in vm.typeOptions" ng-model=vm.type></select></div></div></div><div class="form-group col-md-6 col-lg-6"><div class=row-eq-height><label class="col-md-4 col-lg-4 control-label" for=field-required>是否必填</label><div class="col-md-8 col-lg-8"><div><div class="radio row-eq-height"><label class="col-lg-6 col-md-6"><input type=radio name=field-required ng-model=vm.data.required ng-value=true> 是</label><label class="col-lg-6 col-md-6"><input type=radio name=field-required ng-model=vm.data.required ng-value=false> 否</label></div></div></div></div></div><custom-field-type type=vm.type.typeName metadata=vm.data.metadata></custom-field-type></div><div class=row><div class="col-lg-12 col-md-12"><div class="btn-group pull-right" role=group aria-label=...><button class="btn btn-sm btn-primary" ng-click="contentVisible=false"><span class="glyphicon glyphicon-remove" aria-hidden=true></span> 取消</button> <button class="btn btn-sm btn-primary" ng-click=vm.store()><span class="glyphicon glyphicon-floppy-disk" aria-hidden=true></span> 儲存</button><!-- <button class="btn btn-sm btn-danger">\n                <span class="glyphicon glyphicon-trash" aria-hidden="true"></span> 移除\n              </button> --></div></div></div></form></div></div></div>'),e.put("app/components/customFieldDirective/radioButtonFieldType.html",'<div class="form-group col-md-12 col-lg-12"><div class=row><div class="col-md-2 col-lg-2"><label class=control-label for=field-meta>選項</label></div><div class="col-md-4 col-lg-4"><div class=row><div class="col-md-12 col-lg-12" ng-repeat="option in vm.metadata.options track by $index" ng-mouseenter="visible=true" ng-mouseleave="visible=false"><div class=row><div class="col-md-9 col-lg-9 v-center"><input id=field-meta type=text class=form-control placeholder=選項 ng-model=vm.metadata.options[$index].display_name required></div><div class="col-md-2 col-lg-2 v-center"><div><span ng-show=visible ng-click=vm.delete($index) class="glyphicon glyphicon-remove"></span></div></div></div></div></div><div class="row add-new-option-section"><div class="col-md-4 col-lg-4"><div class=row><div class="col-md-10 col-lg-10 text-center"><i class="text-center glyphicon glyphicon-plus" ng-click=vm.appendOption()></i></div></div></div></div></div></div></div>'),e.put("app/components/customFieldDirective/radioButtonFieldTypePreview.html",'<div class=project-custom-field-preview-section><form><div class=row><div class="form-group col-md-12 col-lg-12"><div class="row row-eq-height"><label class="col-md-offset-1 col-lg-offset-1 col-md-2 col-lg-2 control-label">{{ vm.attribute.name }}</label><div class="col-md-8 col-lg-8"><div ng-repeat="option in vm.attribute.metadata.options"><label><input type=radio name=optionsRadios id=optionsRadios1> {{ option.display_name }}</label></div></div></div></div></div></form></div>'),e.put("app/components/customFieldDirective/radioButtonFilledFieldType.html",'<label class="control-label col-md-2 col-lg-2">{{ vm.title }}</label><div class="col-md-10 col-lg-10"><div ng-repeat="option in vm.metadata.options"><label class=radio-inline><input type=radio name="{{ vm.title }}" ng-value=option.value ng-model=vm.fieldData.option.value> {{ option.display_name }}</label></div></div>'),e.put("app/components/customFieldDirective/textFieldTypePreview.html",'<div class=project-custom-field-preview-section><form><div class=row><div class="form-group col-md-12 col-lg-12"><div class=row><label class="col-md-offset-1 col-lg-offset-1 col-md-2 col-lg-2 control-label">{{ vm.attribute.name }}</label><div class="col-md-7 col-lg-7"><input type=text class=form-control></div></div></div></div></form></div>'),e.put("app/components/customFieldDirective/textFilledFieldType.html",'<label class="control-label col-md-2 col-lg-2">{{ vm.title }}</label><div class="col-md-10 col-lg-10"><input type=text class=form-control placeholder="{{ vm.title }}" ng-model=vm.fieldData.value required></div>'),e.put("app/components/editableProjectHyperlinksDirective/editableProjectHyperlinksDirective.html",'<div class=row><div class="form-group col-md-12 col-lg-12" ng-repeat="hyperlink in vm.data"><div class=row ng-mouseenter="visible=true" ng-mouseleave="visible=false"><div class="col-md-3 col-lg-4"><input type=text class=form-control placeholder=連結名稱 ng-model=hyperlink.name required></div><div class="col-md-7 col-lg-7"><input type=text class=form-control placeholder=連結網址 ng-model=hyperlink.link required></div><div class="col-md-2 col-lg-1"><span ng-show=visible class="glyphicon glyphicon-remove" aria-hidden=true ng-click=vm.remove($index)></span></div></div></div><div class="col-md-12 col-lg-12"><div class=row><div class="col-md-12 col-lg-12"><a class="btn btn-default" ng-click=vm.append()>新增連結</a></div></div></div></div>'),e.put("app/components/navbar/navbar.html",'<nav class="navbar navbar-default navbar-fixed-top" role=navigation><div class=container><div class=navbar-header><a class="navbar-brand color" ui-sref=introduction>VMS</a> <button type=button class=navbar-toggle ng-init="navCollapsed = true" ng-click="navCollapsed = !navCollapsed"><span class=sr-only>Toggle navigation</span> <span class=icon-bar></span> <span class=icon-bar></span> <span class=icon-bar></span></button></div><div id=navbar class="navbar-collapse collapse" collapse=navCollapsed><ul class="nav navbar-nav navbar-right"><li><a ng-hide=vm.userAuthentication.isAuthenticated() ui-sref=registerPrivacy>註冊</a></li><li><a ng-hide=vm.userAuthentication.isAuthenticated() ui-sref=login>登入</a></li><li ng-show=vm.userAuthentication.isAuthenticated() uib-dropdown><a uib-dropdown-toggle>專案<span class=caret></span></a><ul class=dropdown-menu uib-dropdown-menu role=menu><li ng-if=vm.isManagerRole() role=menuitem><a ui-sref=createProject>新增專案</a></li><li ng-if=vm.isManagerRole() role=menuitem><a ui-sref=managedProjectList>我的專案</a></li><li ng-if=vm.isVolunteerRole()><a ui-sref=showAllProjects>所有專案</a></li><li ng-if=vm.isVolunteerRole()><a ui-sref=attendingProjectList>已參與的專案</a></li></ul></li><li ng-show=vm.userAuthentication.isAuthenticated() uib-dropdown><a id=navbar-profile aria-labelledby=nav-profile-tempate-url uib-dropdown-toggle><img src="{{ vm.getAvatarPath() }}" class=img-circle width=20px height=20px> {{ vm.getLastName() }} <span class=caret></span></a><ul class=dropdown-menu aria-labelledby=navbar-profile><li><a ui-sref=profile>我的資料</a></li><li role=separator class=divider></li><li class=disabled><a>身份：{{ vm.getRole() | translate }}</a></li><li ng-if=vm.isManagerRole() role=menuitem><a ng-click=vm.switchToVolunteer()>切換為志工</a></li><li ng-if=vm.isVolunteerRole()><a ng-click=vm.switchToManager()>切換為專案管理員</a></li><li role=separator class=divider></li><li><a ng-click=vm.logout()>登出</a></li></ul></li></ul></div></div></nav>'),e.put("app/components/projectHyperlinksDirective/projectHyperlinksDirective.html",'<div class=row><div class="form-group col-md-12 col-lg-12" ng-repeat="hyperlink in vm.data"><div class=row><div class="col-md-4 col-lg-4">{{ hyperlink.name }}</div><div class="col-md-8 col-lg-8"><span ng-bind-html="hyperlink.link | linky"></span></div></div></div></div>'),e.put("app/components/vmsMessageDirective/vmsMessageDirective.html",'<uib-alert ng-repeat="alert in vm.data" type={{alert.type}} dismiss-on-timeout=alert.timeout><div ng-if=vm.isArray(alert.data) ng-repeat="data in alert.data"><ul><li>{{ data.field | translate }}<ng-repeat ng-repeat="message in data.message">{{ message | translate }}{{ $last ? \'\' : \', \' }}</ng-repeat></li></ul></div><div ng-if=!vm.isArray(alert.data)><ul ng-if=vm.isArray(alert.data.message)><ng-repeat ng-repeat="message in alert.data.message"><li>{{ alert.data.field | translate }} {{ message | translate }}</li></ng-repeat></ul><p ng-if=!vm.isArray(alert.data.message)>{{ alert.data.field | translate }} {{ alert.data.message | translate }}</p></div></uib-alert>'),e.put("app/project/create/createProject.html",'<div class="col-xs-12 col-sm-10 col-sm-offset-1"><h1>新增專案</h1></div><div id=main-content class="top-line col-xs-12 col-sm-10 col-sm-offset-1"><div class="alert alert-danger" role=alert ng-show=vm.errorMsg><span class="glyphicon glyphicon-exclamation-sign" aria-hidden=true></span> <span class=sr-only>Error:</span> {{ vm.errorMsg }}</div><form><h2>基本資訊</h2><hr><div id=profile-basic class="profile-section row"><div class="form-group col-md-6 col-lg-6 col-sm-6 col-xs-12"><div class=row><label for=name class="control-label col-md-2 col-lg-4">名稱</label><div class="col-md-10 col-lg-8"><input type=text class=form-control id=name placeholder=名稱 ng-model=vm.project.name required></div></div></div><div class="form-group col-md-6 col-lg-6 col-sm-6 col-xs-12"><div class=row><label for=organization class="control-label col-md-2 col-lg-4">組織名稱</label><div class="col-md-10 col-lg-8"><input type=text class=form-control id=organization placeholder=組織名稱 ng-model=vm.project.organization required></div></div></div><div class="form-group col-md-6 col-lg-6 col-sm-6 col-xs-12"><div class=row><label for=permission class="control-label col-md-2 col-lg-4">瀏覽權限<span class="glyphicon glyphicon-info-sign" aria-hidden=true popover-title="{{ \'tips\' | translate }}" uib-popover-template="\'projectPermissionExplanationBody.html\'" popover-placement=bottom popover-trigger=mouseenter></span></label><div class="col-md-10 col-lg-8"><select name=permission id=permission class=form-control ng-model=vm.project.permission><option ng-repeat="option in vm.permissionOptions" value="{{ option.value }}">{{ option.name | translate }}</option></select></div></div></div><div class="form-group col-md-6 col-lg-6 col-sm-6 col-xs-12"><div class=row><label for=permission class="control-label col-md-2 col-lg-4"></label><div class="col-md-10 col-lg-8" popover-title="{{ \'tips\' | translate }}" uib-popover-template="\'projectPublishExplanationBody.html\'" popover-placement=bottom popover-trigger=mouseenter><label class=radio-inline><input type=radio name=permission ng-value=true ng-model=vm.project.is_published> 發布</label><label class=radio-inline><input type=radio name=permission ng-value=false ng-model=vm.project.data.attributes.is_published> 不發佈</label></div></div></div><div class="form-group col-md-12 col-lg-12 col-sm-12 col-xs-12"><div class=row><label for=hyperlinks class="control-label col-md-1 col-lg-2">相關連結</label><editable-project-hyperlinks class="col-md-11 col-lg-10" projectid="" data=vm.hyperlinks></editable-project-hyperlinks></div></div><div class="form-group col-md-12 col-lg-12 col-sm-12 col-xs-12"><div class=row><label for=description class="control-label col-md-1 col-lg-1">說明</label><div class="col-md-11 col-lg-10 col-lg-offset-1"><textarea froala=vm.froalaOptions class=form-control id=description ng-model=vm.project.description rows=4></textarea></div></div></div><div class="row profile-section"><div class="col-md-2 col-md-offset-5"><button class="btn btn-primary btn-lg" ng-click=vm.create()>送出</button></div><div class=col-md-5></div></div></div></form></div><script type=text/ng-template id=projectPermissionExplanationBody.html><div>\n			{{ \'project.permission_explanation.body\' | translate }}\n			<ul>\n				<li>{{ \'project.permission_explanation.all_users\' | translate }}</li>\n				<li>{{ \'project.permission_explanation.registered_users\' | translate }}</li>\n				<li>{{ \'project.permission_explanation.members\' | translate }}</li>\n			</ul>\n    </div></script><script type=text/ng-template id=projectPublishExplanationBody.html><div>\n			{{ \'project.publish_explanation.body\' | translate }}\n    </div></script>'),e.put("app/project/edit/editProject.html",'<div class="alert alert-danger" role=alert ng-show=vm.errorMsg><span class="glyphicon glyphicon-exclamation-sign" aria-hidden=true></span> <span class=sr-only>Error:</span> {{ vm.errorMsg }}</div><form><span class=h2-inline>修改</span><hr><div id=profile-basic class="profile-section row-eq-height"><div class="form-group col-md-6 col-lg-6 col-sm-6 col-xs-12"><div class=row><label for=name class="control-label col-md-12 col-lg-4">名稱</label><div class="col-md-12 col-lg-8"><input type=text class=form-control id=name placeholder=名稱 ng-model=vm.project.name required></div></div></div><div class="form-group col-md-6 col-lg-6 col-sm-6 col-xs-12"><div class=row><label for=organization class="control-label col-md-12 col-lg-4">組織名稱</label><div class="col-md-12 col-lg-8"><input type=text class=form-control id=organization placeholder=組織名稱 ng-model=vm.project.organization required></div></div></div><div class="form-group col-md-6 col-lg-6 col-sm-6 col-xs-12"><div class=row><label for=permission class="control-label col-md-12 col-lg-4">權限</label><div class="col-md-12 col-lg-8"><select name=permission id=permission class=form-control ng-options="option.value as option.name | translate for option in vm.permissionOptions" ng-model=vm.project.permission></select></div></div></div><div class="form-group col-md-6 col-lg-6 col-sm-6 col-xs-12"><div class=row><div class="col-md-12 col-lg-8 col-lg-offset-4 center-block"><label class=radio-inline><input type=radio name=permission ng-value=true ng-model=vm.project.is_published> 發布</label><label class=radio-inline><input type=radio name=permission ng-value=false ng-model=vm.project.is_published> 不發佈</label></div></div></div><div class="form-group col-md-12 col-lg-12 col-sm-12 col-xs-12"><div class=row><label for=hyperlinks class="control-label col-md-12 col-lg-2">相關連結</label><editable-project-hyperlinks class="col-md-12 col-lg-10" project-id=vm.project.id data=vm.hyperlinks></editable-project-hyperlinks></div></div><div class="form-group col-md-12 col-lg-12 col-sm-12 col-xs-12"><div class=row><label for=description class="control-label col-md-12 col-lg-2">說明</label><div class="col-md-12 col-lg-10"><textarea froala=vm.froalaOptions class=form-control id=description style="min-width: 100%" ng-model=vm.project.description rows=10></textarea></div></div></div><div class="row profile-section"><div class="col-md-12 col-md-offset-5"><button class="btn btn-primary btn-lg" ng-click=vm.update()>送出</button></div><div class=col-md-5></div></div></div></form>'),e.put("app/project/panel/projectPanel.html",'<div class="panel panel-default"><div class=panel-heading><b>專案</b></div><ul class=list-group><li class=list-group-item ng-show=vm.isCreator()><a ui-sref="project.show({ projectId: vm.project.id })">查看</a></li><li class=list-group-item ng-show=vm.isCreator()><a ui-sref="project.edit({ projectId: vm.project.id })">修改</a></li><li class=list-group-item ng-show=vm.isCreator()><a ui-sref="project.manageMembers({ projectId: vm.project.id })">成員管理</a></li><li class=list-group-item ng-show=vm.isCreator()><a ui-sref="project.manageCustomField({ projectId: vm.project.id })">自訂欄位管理</a></li></ul></div>'),e.put("app/user/changePassword/changePassword.html",'<div class=row><vms-message data=vm.alert></vms-message><h2>{{ \'change_password\' | translate }}</h2><hr></div><form name=changePassword ng-submit=vm.submit()><div class="row-eq-height profile-section"><div class="form-group col-md-12 col-lg-12 col-sm-12 col-xs-12"><div class=row><label for=first-name class="control-label col-md-2 col-lg-2">原密碼</label><div class="col-md-8 col-lg-8"><input type=password class=form-control id=password placeholder=原密碼 ng-model=vm.data.password required></div></div></div><div class="form-group col-md-12 col-lg-12 col-sm-12 col-xs-12"><div class=row><label for=first-name class="control-label col-md-2 col-lg-2">新密碼</label><div class="col-md-8 col-lg-8"><input type=password name=newPassword ng-class="{\'has-error\':changePassword.newPasswordConfirmation.$error.match}" class=form-control id=newPassword placeholder=新密碼 ng-model=vm.data.newPassword required></div></div></div><div class="form-group col-md-12 col-lg-12 col-sm-12 col-xs-12"><div class=row><label for=first-name class="control-label col-md-2 col-lg-2">確認新密碼</label><div class="col-md-8 col-lg-8"><input type=password name=newPasswordConfirmation ng-class="{\'has-error\':changePassword.newPasswordConfirmation.$error.match}" class=form-control id=newPasswordConfirmation placeholder=確認新密碼 ng-model=vm.data.newPasswordConfirmation match=vm.data.newPassword minlenght=6 required></div><div class="col-md-8 col-lg-8 col-md-offset-2 col-lg-offset-2"><p class=text-danger ng-show=changePassword.newPasswordConfirmation.$error.match>{{ \'alert.danger.password_not_match\' | translate }}</p></div></div></div></div><div class="row profile-section"><div class="col-md-2 col-md-offset-5"><button class="btn btn-primary btn-lg" type=submit>送出</button></div><div class=col-md-5></div></div></form>'),
e.put("app/user/education/userEducation.html",'<div class=profile-section><span class=h2-inline>教育</span> <button class="btn btn-default pull-right" ng-click=vm.setAddEducationVisible()>新增教育</button><hr><div ng-show=vm.isShowAddEducation><form id=new-education class="form-inline education-section"><div class=row><div class="form-group col-md-12 col-lg-12 col-sm-12 col-xs-12"><div class=row><label for=school class="control-label col-md-2 col-lg-2">學校名稱</label><div class="col-md-8 col-lg-8"><input type=text class=form-control id=school placeholder=學校名稱 ng-model=vm.sEducation.school required></div></div></div><div class="form-group col-md-6 col-lg-6 col-sm-6 col-xs-12"><div class=row><label for=field-of-study class="control-label col-md-4 col-lg-4">科系</label><div class="col-md-8 col-lg-8"><input type=text class=form-control id=field-of-study placeholder=科系 ng-model=vm.sEducation.field_of_study required></div></div></div><div class="form-group col-md-6 col-lg-6 col-sm-6 col-xs-12"><div class=row><label for=degree class="control-label col-md-4 col-lg-4">學歷</label><div class="col-md-8 col-lg-8"><select class=form-control id=degree placeholder=學歷 ng-model=vm.sEducation.degree ng-options="d.value as d.text | translate for d in vm.degrees" required></select></div></div></div><div class="form-group col-md-6 col-lg-6 col-sm-6 col-xs-12"><div class=row><label for=start-year class="control-label col-md-4 col-lg-4">開始期間</label><div class="col-md-8 col-lg-8"><select name=start-years class=form-control id=start-year placeholder=起始年 ng-model=vm.sEducation.start_year ng-options="y.value as y.text for y in vm.years" required></select></div></div></div><div class="form-group col-md-6 col-lg-6 col-sm-6 col-xs-12"><div class=row><label for=end-year class="control-label col-md-4 col-lg-4">結束期間</label><div class="col-md-8 col-lg-8"><select name=end-year class=form-control id=end-year placeholder=結束年 ng-model=vm.sEducation.end_year ng-options="y.value as y.text for y in vm.years"></select></div></div></div><div class="form-group col-md-6 col-sm-6 col-xs-12 col-lg-12"><div class=row><div class=col-lg-12><button type=button class="btn btn-primary" ng-click=vm.addEducation()>儲存</button> <button type=button class="btn btn-default" ng-click=vm.setAddEducationInvisible()>取消</button></div></div></div></div></form></div><div ng-show="vm.educations != undefined && vm.educations.length != 0"><div ng-repeat="(index, education) in vm.educations"><form editable-form name=vm.education{{education.id}} class="form-inline education-section" onaftersave=vm.updateEducation(education.id) onshow=vm.onShowEditableForm(education.id) onhide=vm.onHideEditableForm(education.id)><div class=row><div class="form-group col-md-12 col-lg-12 col-sm-12 col-xs-12"><div class="row grid-vertical-align"><label for=school class="control-label col-md-2 col-lg-2">學校名稱</label><div class="col-md-8 col-lg-8"><a editable-text="vm.educations[{{ index }}].school" e-name=school ng-click=vm.editableFormShow(education.id) e-required>{{ vm.educations[index].school }}</a></div></div></div><div class="form-group col-md-6 col-lg-6 col-sm-6 col-xs-12"><div class="row grid-vertical-align"><label for=field-of-study class="control-label col-md-4 col-lg-4">科系</label><div class="col-md-8 col-lg-8"><a editable-text="vm.educations[{{ index }}].field_of_study" e-nmae=field-of-study ng-click=vm.editableFormShow(education.id) e-required>{{ vm.educations[index].field_of_study }}</a></div></div></div><div class="form-group col-md-6 col-lg-6 col-sm-6 col-xs-12"><div class="row grid-vertical-align"><label for=degree class="control-label col-md-4 col-lg-4">學歷</label><div class="col-md-8 col-lg-8"><a editable-select="vm.educations[{{ index }}].degree" e-nmae=degree e-ng-options="d.value as d.text | translate for d in vm.degrees" ng-click=vm.editableFormShow(education.id) e-required>{{ vm.educations[index].degree | educationDegree | translate }}</a></div></div></div><div class="form-group col-md-6 col-lg-6 col-sm-6 col-xs-12"><div class="row grid-vertical-align"><label for=start-year class="control-label col-md-4 col-lg-4">開始期間</label><div class="col-md-8 col-lg-8"><a editable-select="vm.educations[{{ index }}].start_year" e-ng-options="y.value as y.text for y in vm.years" ng-click=vm.editableFormShow(education.id)>{{ vm.educations[index].start_year }}</a></div></div></div><div class="form-group col-md-6 col-lg-6 col-sm-6 col-xs-12"><div class="row grid-vertical-align"><label for=end-year class="control-label col-md-4 col-lg-4">結束期間</label><div class="col-md-8 col-lg-8"><a editable-select="vm.educations[{{ index }}].end_year" e-ng-options="y.value as y.text for y in vm.years" ng-click=vm.editableFormShow(education.id)>{{ vm.educations[index].end_year }}</a></div></div></div><div class="form-group col-md-6 col-lg-12 col-sm-6 col-xs-12"><div class=row><div class=col-lg-12 ng-show=vm.editableIsVisible(education.id)><button type=submit class="btn btn-primary">儲存</button> <button type=button class="btn btn-default" ng-click=vm.editableFormCancel(education.id)>取消</button> <a ng-click=vm.deleteEducation(education.id)>刪除</a></div></div></div></div></form></div></div></div>'),e.put("app/user/experience/userExperience.html",'<div class=profile-section><span class=h2-inline>經驗</span> <button class="btn btn-default pull-right" ng-click=vm.setAddExperienceVisible()>新增經驗</button><hr><div ng-show=vm.isShowAddExperience><form id=new-experience class="form-inline experience-section"><div class=row><div class="form-group col-md-6 col-lg-6 col-sm-6 col-xs-12"><div class=row><label for=company class="control-label col-md-4 col-lg-4">公司名稱</label><div class="col-md-8 col-lg-8"><input type=text class=form-control id=company placeholder=公司名稱 ng-model=vm.sExperience.company required></div></div></div><div class="form-group col-md-6 col-lg-6 col-sm-6 col-xs-12"><div class=row><label for=job-title class="control-label col-md-4 col-lg-4">工作職稱</label><div class="col-md-8 col-lg-8"><input type=text class=form-control id=job-title placeholder=工作職稱 ng-model=vm.sExperience.job_title required></div></div></div><div class="form-group col-md-6 col-lg-6 col-sm-6 col-xs-12"><div class=row><label for=start-year class="control-label col-md-4 col-lg-4">開始期間</label><div class="col-md-8 col-lg-8"><select name=start-years class=form-control id=start-year placeholder=起始年 ng-model=vm.sExperience.start_year ng-options="y.value as y.text for y in vm.years" required></select></div></div></div><div class="form-group col-md-6 col-lg-6 col-sm-6 col-xs-12"><div class=row><label for=end-year class="control-label col-md-4 col-lg-4">結束期間</label><div class="col-md-8 col-lg-8"><select name=end-year class=form-control id=end-year placeholder=結束年 ng-model=vm.sExperience.end_year ng-options="y.value as y.text for y in vm.years"></select></div></div></div><div class="form-group col-md-6 col-sm-6 col-xs-12 col-lg-12"><div class=row><div class=col-lg-12><button type=button class="btn btn-primary" ng-click=vm.addExperience()>儲存</button> <button type=button class="btn btn-default" ng-click=vm.setAddExperienceInvisible()>取消</button></div></div></div></div></form></div><div ng-show="vm.experiences != undefined && vm.experiences.length != 0"><div ng-repeat="(index, experience) in vm.experiences"><form editable-form name=vm.experience{{experience.id}} class="form-inline experience-section" onaftersave=vm.updateExperience(experience.id) onshow=vm.onShowEditableForm(experience.id) onhide=vm.onHideEditableForm(experience.id)><div class=row><div class="form-group col-md-6 col-lg-6 col-sm-6 col-xs-12"><div class="row grid-vertical-align"><label for=company class="control-label col-md-4 col-lg-4">公司名稱</label><div class="col-md-8 col-lg-8"><a editable-text="vm.experiences[{{ index }}].company" e-name=company ng-click=vm.editableFormShow(experience.id) e-required>{{ vm.experiences[index].company }}</a></div></div></div><div class="form-group col-md-6 col-lg-6 col-sm-6 col-xs-12"><div class="row grid-vertical-align"><label for=job-title class="control-label col-md-4 col-lg-4">工作職稱</label><div class="col-md-8 col-lg-8"><a editable-text="vm.experiences[{{ index }}].job_title" e-nmae=job-title ng-click=vm.editableFormShow(experience.id) e-required>{{ vm.experiences[index].job_title }}</a></div></div></div><div class="form-group col-md-6 col-lg-6 col-sm-6 col-xs-12"><div class="row grid-vertical-align"><label for=start-year class="control-label col-md-4 col-lg-4">開始期間</label><div class="col-md-8 col-lg-8"><a editable-select="vm.experiences[{{ index }}].start_year" e-ng-options="y.value as y.text for y in vm.years" ng-click=vm.editableFormShow(experience.id)>{{ vm.experiences[index].start_year }}</a></div></div></div><div class="form-group col-md-6 col-lg-6 col-sm-6 col-xs-12"><div class="row grid-vertical-align"><label for=end-year class="control-label col-md-4 col-lg-4">結束期間</label><div class="col-md-8 col-lg-8"><a editable-select="vm.experiences[{{ index }}].end_year" e-ng-options="y.value as y.text for y in vm.years" ng-click=vm.editableFormShow(experience.id)>{{ vm.experiences[index].end_year }}</a></div></div></div><div class="form-group col-md-6 col-lg-12 col-sm-6 col-xs-12"><div class=row><div class=col-lg-12 ng-show=vm.editableIsVisible(experience.id)><button type=submit class="btn btn-primary">儲存</button> <button type=button class="btn btn-default" ng-click=vm.editableFormCancel(experience.id)>取消</button> <a ng-click=vm.deleteExperience(experience.id)>刪除</a></div></div></div></div></form></div></div></div>'),e.put("app/user/forgotPassword/forgotPassword.html",'<div class="col-md-8 col-md-offset-2"><h1 class=text-center>忘記密碼</h1></div><div id=main-content class="col-md-8 col-md-offset-2 top-line"><vms-message data=vm.alert></vms-message><form class=form-horizontal ng-submit=vm.submit()><div class=form-group><label for=email class="col-sm-2 control-label">電子信箱</label><div class=col-sm-10><input type=text class=form-control id=email placeholder=電子信箱 ng-model=vm.data.email required></div></div><div class=form-group><div class="col-sm-offset-2 col-sm-10"><button type=submit class="btn btn-primary">送出</button></div></div></form></div>'),e.put("app/user/login/userLogin.html",'<div id=main-content class="col-md-8 col-md-offset-2"><h1>登入</h1><hr class=hr><vms-message data=vm.alert></vms-message><form class=form-horizontal ng-submit=vm.login()><div class=form-group><label for=username class="col-sm-2 control-label">帳號</label><div class=col-sm-10><input type=text class=form-control id=username placeholder=帳號 ng-model=vm.credentials.username required></div></div><div class=form-group><label for=password class="col-sm-2 control-label">密碼</label><div class=col-sm-10><input type=password class=form-control id=password placeholder=密碼 ng-model=vm.credentials.password required></div></div><div class=form-group><label for=password class="col-sm-2 control-label">選擇身份</label><div class=col-sm-10><label class=radio-inline><input type=radio name=role id=role value=volunteer ng-model=vm.role required> 志工</label><label class=radio-inline><input type=radio name=role id=role value=manager ng-model=vm.role required> 專案管理員</label></div></div><div class=form-group><div class="col-sm-offset-2 col-sm-10"><a class=pull-right ui-sref=forgotPassword>忘記密碼</a></div></div><div class=form-group><div class="col-sm-offset-2 col-sm-10"><button type=submit class="btn btn-primary">登入</button></div></div></form></div>'),e.put("app/user/register/registerPrivacy.html",'<div class="col-lg-offset-2 col-lg-8 col-sm-12 col-xs-12"><h1>隱私權政策</h1><div id=main-content><p class=lead>歡迎您使用 VMS 網站（下稱「本網站」）與相關服務，為了尊重與保護您在本網站上個人資料的隱密性，VMS 將透過這份「VMS 隱私權聲明」（下稱「本聲明」），讓您瞭解VMS 如何透過本網站蒐集、運用與保護您個人的非公示資訊。請您詳細閱讀本聲明，如有任何疑問歡迎您透過 e-mail 與 VMS 聯絡： volunteer.service.tw@gmail.com。</p><p class=text-right>更新日期：2015/10/27</p><hr><h3>個人資料的蒐集方式</h3><p>VMS 透過本網站蒐集個人資料之方式包括：<ol><li>要求您自行輸入個人資料；</li><li>系統自動記錄您瀏覽本網站之歷程</li></ol></p><h3>蒐集的個人資料內容</h3><p>您在本網站註冊新帳號並完成註冊程序後，即成為本網站會員，而您在註冊時需提供的個人資料包括帳號名稱、您的姓名、e-mail 與密碼及其他聯絡方式等。</p><p>註冊完成之後，您可以到「我的資料」填寫、編輯您的個人資訊。您可以自由決定是否填寫這些個人資訊，「我的資料」中的個人資訊並非必填項目。</p><p>若您有加入的外包專案，VMS 將會紀錄您所參與之專案。您亦得在本網站的專案中提供您的個人資料。</p><p>當您瀏覽本網站時，VMS 將以匿名方式蒐集您的操作流程，包括您使用連線設備的IP位址、使用時間、使用的瀏覽器、瀏覽及點選資料紀錄。</p><h3>個人資料之運用</h3><p>為執行本網站相關規定，VMS 可能透過您提供的個人資料與您進行聯絡。</p><p>您的帳號名稱將可讓外包專案中的專案管理員查看，並詢問您是否同意參加專案，除此之外，只要沒有自行將您其他的註冊資料揭露於本網站上，任何使用者均無法瀏覽或利用您的資料。</p><h3>個人聯絡資料之運用</h3><p>本網站將透過電子郵件傳送本網站相關資訊，這些資訊包括但不限於使用者註冊確認信、本聲明與使用條款的修正訊息以、專案邀請、通知信件及本網站活動資訊，但您的電子信箱不會在其他使用者之收件者列表中顯示。</p><h3>線上活動紀錄的運用</h3><p>當您瀏覽本網站，伺服器會自動記錄使用者機器的 IP 位址、使用時間、使用的瀏覽器、瀏覽及點選紀錄等資料，並加以分析。</p><p>本網站僅會針對全體使用者行為之總和進行分析，不會針對您個別之行為進行分析，除非您願意告知您的個人資料，否則 VMS 並不會將此項記錄和您對應。</p><h3>向第三方揭露個人資料</h3><p>若為中華民國相關法令、司法或政府機關要求，或經您的同意，本網站將會揭露您的個人資料，但僅限於向相關之第三人揭露您的個人資料。</p><h3>個人資料之修改</h3><p>當您在本網站註冊後，您可以隨時利用我的資料中之連結，更改（目前尚未提供）、刪除帳號以外您所輸入的任何資料，例如個人姓名、電子信箱、聯絡方式等。 但除了您主動登錄的個人資料之外，您在本網站相關外包專案或事件追蹤系統中所提供之個人資料，不在此修改範圍之內。</p><h3>資料保護措施</h3><p>本網站將會運用安全技術和程序來保護您的個人資料，避免未經您授權的存取、使用或洩露。例如，本網站會將您提供的個人資訊儲存在嚴密控管的設施與電腦設備中，並僅允許少數系統管理者擁有存取權限。</p><p>請妥善保管您的密碼及個人資料，請勿將任何個人資料，尤其是您的密碼提供給任何人，若因此造成任何損失，本不負任何責任。</p><h3>造訪其他網站之注意事項</h3><p>透過本網站所提供的超連結，您可能造訪與本網站相連結之其他網站，這些其他網站也可能蒐集您的個人資料。對於您主動提供的個人資訊，各相連結之其他網站有其個別的隱私權保護政策，其資料處理措施不適用本聲明，本不負任何責任，建議您詳加閱讀這些網站的隱私權保護政策。</p><h3>隱私權聲明更新</h3><p>本網站將不定期更新本聲明，更新時，本網站會同時修訂本聲明的「最後更新日期」。本聲明的重要變更，亦會張貼在本網站上顯著位置，以提醒您注意。</p><hr><button class="btn btn-primary btn-lg" ui-sref=register>同意</button> <button class="btn btn-default btn-lg">不同意</button></div></div>'),e.put("app/user/register/userRegister.html",'<div class="col-xs-12 col-sm-10 col-sm-offset-1"><h1>註冊</h1></div><div id=main-content class="top-line col-xs-12 col-sm-10 col-sm-offset-1"><vms-message data=vm.alerts></vms-message><form name=register class=form-inline autocomplete=off ng-submit=vm.register()><h2>基本資料</h2><hr><div id=profile-avatar><img id=avatar-image alt="Bootstrap Image Preview" ng-src={{vm.showAvatar}} width=200 class=img-circle> <input id=avatar-input type=file ng-model=vm.avatar onloadend=vm.selectAvatar base-sixty-four-input></div><div id=profile-basic class="profile-section row-eq-height"><div class="col-md-12 col-lg-12 col-sm-12 col-xs-12"><div class=row><div class="col-md-6 col-lg-6 col-sm-6 col-xs-12"><div class=row><label required-label for=username class="control-label col-md-3 col-lg-3">帳號</label><div class="col-md-9 col-lg-9"><input type=text minlength=6 class=form-control id=username placeholder=帳號 ng-model=vm.volunteer.username required></div></div></div></div></div><div class="col-md-6 col-lg-6 col-sm-6 col-xs-12"><div class=row><label required-label for=password class="control-label col-md-3 col-lg-3">密碼</label><div class="col-md-9 col-lg-9"><input ng-class="{\'has-error\':register.confirmPassowrd.$error.match}" type=password name=password minlength=6 class=form-control id=password placeholder=密碼 ng-model=vm.volunteer.password required></div></div></div><div class="col-md-6 col-lg-6 col-sm-6 col-xs-12"><div class=row><div class="col-md-12 col-lg-12"><!-- <p class="text-danger">...</p> --></div></div></div><div class="col-md-6 col-lg-6 col-sm-6 col-xs-12"><div class=row><label required-label for=confirmPassowrd class="control-label col-md-3 col-lg-3">確認密碼</label><div class="col-md-9 col-lg-9"><input ng-class="{\'has-error\':register.confirmPassowrd.$error.match}" type=password match=vm.volunteer.password name=confirmPassowrd ng-model=vm.passwordConfirm minlength=6 class=form-control id=confirm-passowrd placeholder=確認密碼 required></div></div></div><div class="col-md-6 col-lg-6 col-sm-6 col-xs-12"><div class=row><div class="col-md-12 col-lg-12"><p class=text-danger ng-show=register.confirmPassowrd.$error.match>{{ \'alert.danger.password_not_match\' | translate }}</p></div></div></div><div class="col-md-6 col-lg-6 col-sm-6 col-xs-12"><div class=row><label required-label for=first-name class="control-label col-md-3 col-lg-3">姓氏</label><div class="col-md-9 col-lg-9"><input type=text class=form-control id=first-name placeholder=姓氏 ng-model=vm.volunteer.first_name required></div></div></div><div class="col-md-6 col-lg-6 col-sm-6 col-xs-12"><div class=row><label required-label for=last-name class="control-label col-md-3 col-lg-3">名字</label><div class="col-md-9 col-lg-9"><input type=text class=form-control id=last-name placeholder=名字 ng-model=vm.volunteer.last_name required></div></div></div><div class="col-md-6 col-lg-6 col-sm-6 col-xs-12"><div class=row><label required-label for=birth-year class="control-label col-md-3 col-lg-3">出生年份</label><div class="col-md-9 col-lg-9"><div class=input-group><input id=birth-year type=text class=form-control uib-datepicker-popup={{vm.datePicker.format}} ng-model=vm.volunteer.birth_year is-open=vm.datePicker.status.opened datepicker-options=vm.datePicker.dateOptions ng-required=true close-text=Close format-year> <span class=input-group-btn><button type=button class="btn btn-default" ng-click=vm.openDatePicker($event)><i class="glyphicon glyphicon-calendar"></i></button></span></div></div></div></div><div class="col-md-6 col-lg-6 col-sm-6 col-xs-12"><div class=row><label required-label for=gender class="control-label col-md-3 col-lg-3">性別</label><div class="col-md-9 col-lg-9"><label class=radio-inline><input type=radio name=gender id=gender value=female ng-model=vm.volunteer.gender> 女</label><label class=radio-inline><input type=radio name=gender id=gender value=male ng-model=vm.volunteer.gender> 男</label></div></div></div><div class="col-md-6 col-lg-6 col-sm-6 col-xs-12"><div class=row><label required-label for=city class="control-label col-md-3 col-lg-3">縣市</label><div class="col-md-9 col-lg-9"><select class=form-control name=city ng-model=vm.volunteer.city.id ng-options="city.id as city.name_zh_tw for city in vm.cities"></select></div></div></div><div class="col-md-6 col-lg-6 col-sm-12 col-xs-12"><div class=row><label required-label for=address class="control-label col-md-3 col-lg-3">鄉鎮市區</label><div class="col-md-9 col-lg-9"><input name=address type=text class=form-control id=address placeholder=鄉鎮市區 ng-model=vm.volunteer.location></div></div></div></div><div id=profile-contact class="profile-section row"><h2>聯絡資料</h2><hr><div class="col-md-6 col-lg-6 col-sm-6 col-xs-12"><div class=row><label required-label for=email class="control-label col-md-3 col-lg-3">電子郵件</label><div class="col-md-9 col-lg-9"><input type=email name=email type=text class=form-control id=email placeholder=電子郵件 ng-model=vm.volunteer.email required></div></div></div><div class="col-md-6 col-lg-6 col-sm-6 col-xs-12"><div class=row><label for=phone-number class="control-label col-md-3 col-lg-3">電話號碼</label><div class="col-md-9 col-lg-9"><input name=phone-number type=text class=form-control id=phone-number placeholder=電話號碼 ng-model=vm.volunteer.phone_number></div></div></div><div class="col-md-6 col-lg-6 col-sm-6 col-xs-12"><div class=row><label for=emergency-contact class="control-label col-md-3 col-lg-3">緊急聯絡人</label><div class="col-md-9 col-lg-9"><input name=emergency-contact type=text class=form-control id=emergency-contact placeholder=緊急聯絡人 ng-model=vm.volunteer.emergency_contact></div></div></div><div class="col-md-6 col-lg-6 col-sm-6 col-xs-12"><div class=row><label for=emergency-contact-phone class="control-label col-md-3 col-lg-3">緊急聯絡人電話</label><div class="col-md-9 col-lg-9"><input name=emergency-contact-phone type=text class=form-control id=emergency-contact-phone placeholder=緊急聯絡人電話 ng-model=vm.volunteer.emergency_phone></div></div></div></div><div class="row profile-section"><div class="col-md-2 col-md-offset-5"><button class="btn btn-primary btn-lg">送出</button></div><div class=col-md-5></div></div></form></div>'),e.put("app/user/resetPassword/resetPassword.html",'<div class="col-md-8 col-md-offset-2"><h1 class=text-center>重設密碼</h1></div><div id=main-content class="col-md-8 col-md-offset-2 top-line"><vms-message data=vm.alert></vms-message><form name=resetPassword ng-if=vm.showResetForm class=form-horizontal ng-submit=vm.submit()><div class=form-group><label for=password class="col-sm-2 control-label">密碼</label><div class=col-sm-10><input type=password ng-class="{\'has-error\':resetPassword.passwordConfirmation.$error.match}" class=form-control id=password placeholder=密碼 ng-model=vm.data.password minlength=6 required></div></div><div class=form-group><label for=password-confirmation class="col-sm-2 control-label">確認密碼</label><div class=col-sm-10><input type=password name=passwordConfirmation ng-class="{\'has-error\':resetPassword.passwordConfirmation.$error.match}" class=form-control id=password-confirmation placeholder=確認密碼 ng-model=vm.data.passwordConfirmation match=vm.data.password minlength=6 match-required></div></div><div><div class="col-md-12 col-lg-12 col-sm-12 col-xs-12"><p class=text-danger ng-show=resetPassword.passwordConfirmation.$error.match>{{ \'alert.danger.password_not_match\' | translate }}</p></div></div><div class=form-group><div class="col-sm-offset-2 col-sm-10"><button type=submit class="btn btn-primary">送出</button></div></div></form></div>'),e.put("app/components/customField/preview/customFieldPreview.html",'<div class=row><div class="col-md-12 col-lg-12" ng-repeat="set in vm.data"><fill-custom-field-type type=set.type title=set.name metadata=set.metadata></fill-custom-field-type></div></div>'),e.put("app/project/customField/manage/manageProjectCustomField.html",'<span class=h2-inline>自訂欄位管理</span> <span class="btn-group pull-right" role=group><button class="btn btn-default" ng-click=vm.appendCustomField()><span class="glyphicon glyphicon-plus"></span> 新增欄位</button><!-- <button class="btn btn-default"><span class="glyphicon glyphicon-ok"></span> 完成</button> --> <button class="btn btn-default" ng-click=vm.preview(vm.customFields)><span class="glyphicon glyphicon-eye-open"></span> 瀏覽</button></span><hr><vms-message data=vm.alerts></vms-message><div id=poject-custom-fields-section ng-repeat="customField in vm.customFields"><custom-field data=customField></custom-field></div><!--angular ui modal--><script type=text/ng-template id=customFieldPreview.html><div class="modal-header">\n    <h3 class="modal-title">瀏覽</h3>\n</div>\n<div class="modal-body">\n    <custom-field-preview data="vm.data"></custom-field-preview>\n</div></script>'),e.put("app/project/customField/fill/fillCustomFields.html",'<div class="col-xs-12 col-sm-10 col-sm-offset-1"><h2>自訂欄位資料</h2></div><div id=main-content class="top-line col-xs-12 col-sm-10 col-sm-offset-1"><div class="alert alert-danger" role=alert ng-show=vm.errorMsg><span class="glyphicon glyphicon-exclamation-sign" aria-hidden=true></span> <span class=sr-only>Error:</span> {{ vm.errorMsg }}</div><div class="alert alert-info" role=alert ng-show=vm.msg><span class="glyphicon glyphicon-exclamation-sign" aria-hidden=true></span> <span class=sr-only>訊息：</span> {{ vm.msg }}</div><form><div id=profile-basic class="profile-section row"><div class="col-md-12 col-lg-12" ng-repeat="set in vm.data"><fill-custom-field-type type=set.type title=set.name field-data=set.custom_field_data.data metadata=set.metadata></fill-custom-field-type></div></div><div class="row profile-section"><div class="col-md-2 col-md-offset-5"><button class="btn btn-primary btn-lg" ng-click=vm.update()>送出</button></div><div class=col-md-5></div></div></form></div>'),e.put("app/project/detail/managed/managedProjectDetail.html",'<div class="alert alert-danger" role=alert ng-show=vm.errorMsg><span class="glyphicon glyphicon-exclamation-sign" aria-hidden=true></span> <span class=sr-only>Error:</span> {{ vm.errorMsg }}</div><span class=h2-inline>基本資訊</span> <button class="btn btn-default pull-right" ng-click=vm.attend() ng-show=vm.isGuest()>加入</button> <button class="btn btn-default pull-right" ui-sref="fillProjectCustomFieldData({ projectId: vm.project.data.id })" ng-show=vm.isMember()>填寫資料</button> <button class="btn btn-default pull-right" ui-sref="editProject({ id: vm.project.data.id })" ng-show=vm.isCreator()>編輯</button><hr><div id=project-basic class="project-section row"><div class="col-md-6 col-lg-6 col-sm-6 col-xs-12"><div class=row><label for=name class="col-md-2 col-lg-4">名稱</label><div class="col-md-10 col-lg-8"><span id=name>{{ vm.project.name }}</span></div></div></div><div class="col-md-6 col-lg-6 col-sm-6 col-xs-12"><div class=row><label for=organization class="col-md-2 col-lg-4">組織名稱</label><div class="col-md-10 col-lg-8"><span id=organization>{{ vm.project.organization }}</span></div></div></div><div class="col-md-6 col-lg-6 col-sm-6 col-xs-12"><div class=row><label for=permission class="col-md-2 col-lg-4">權限</label><div class="col-md-10 col-lg-8"><span>{{ vm.project.permission | permissionText | translate }}</span></div></div></div><div class="col-md-6 col-lg-6 col-sm-6 col-xs-12"><div class=row><label for=permission class="col-md-2 col-lg-4">是否發布</label><div class="col-md-10 col-lg-8"><span id=permission aria-label=ABC ng-true-value=true ng-false-value=false>{{ vm.project.is_published | yesNo }}</span></div></div></div><div class="col-md-12 col-lg-12 col-sm-12 col-xs-12"><div class=row><label for=hyperlinks class="col-md-1 col-lg-2">相關連結</label><project-hyperlinks class="col-md-11 col-lg-10" project-id=vm.project.id></project-hyperlinks></div></div><div class="col-md-12 col-lg-12 col-sm-12 col-xs-12"><div class=row><label for=description class="col-md-1 col-lg-1">說明</label><div class="col-md-10 col-lg-10"><div id=description ng-bind-html="vm.project.description | htmlize"></div></div></div></div></div><div class=project-section><span class=h2-inline>專案成員</span> <button class="btn btn-default pull-right" ng-click=vm.manageMembers() ng-show=vm.isCreator()>成員管理</button><hr><div class=row><div ng-repeat="member in vm.membersList.data track by $index"><div class="col-md-2 col-lg-3"><span class="glyphicon glyphicon-user"></span> <a ng-click=vm.showMember(member)>{{ member.attributes.username }}</a></div><!-- <div class="col-md-1 col-lg-1">\n			      {{ member.attributes.first_name }} {{ member.attributes.last_name}}\n			    </div> --></div></div></div>'),e.put("app/project/detail/public/projectDetail.html",'<div class="col-xs-12 col-sm-10 col-sm-offset-1"><h1>瀏覽專案</h1></div><div id=main-content class="top-line col-xs-12 col-sm-10 col-sm-offset-1"><div class="alert alert-danger" role=alert ng-show=vm.errorMsg><span class="glyphicon glyphicon-exclamation-sign" aria-hidden=true></span> <span class=sr-only>Error:</span> {{ vm.errorMsg }}</div><span class=h3-inline>{{ vm.project.name }}</span> <button class="btn btn-default pull-right" ng-click=vm.attend() ng-show=vm.isGuest()>加入</button> <button class="btn btn-default pull-right" ui-sref="fillProjectCustomFieldData({ projectId: vm.project.id })" ng-show=vm.isMember()>填寫資料</button> <button class="btn btn-default pull-right" ui-sref="project.edit({ projectId: vm.project.id })" ng-show=vm.isCreator()>編輯</button><hr><div id=project-basic class="project-section row"><div class="col-md-6 col-lg-6"><div class=row><div class="col-md-4 col-lg-4"><span class="glyphicon glyphicon-user" aria-hidden=true></span> {{ \'manager\' | translate }}</div><div class="col-md-8 col-lg-8"><p>{{ vm.project.managers.data[0].last_name }} {{ vm.project.managers.data[0].first_name }}</p>({{ vm.project.managers.data[0].email }})</div></div></div><div class="col-md-6 col-lg-6"><div class=row><div class="col-md-4 col-lg-4"><span class="glyphicon glyphicon-time" aria-hidden=true></span> {{ \'created_date\' | translate }}</div><div class="col-md-8 col-lg-8">{{ vm.project.created_at }}</div></div></div><div class="col-md-12 col-lg-12"><div class=row><div class="col-md-2 col-lg-2"><span class="glyphicon glyphicon-info-sign" aria-hidden=true></span> {{ \'description\' | translate }}</div><div class="col-md-10 col-lg-10" ng-bind-html="vm.project.description | htmlize"></div></div></div><div class="col-md-12 col-lg-12"><div class=row><div class="col-md-2 col-lg-2"><span class="glyphicon glyphicon-link" aria-hidden=true></span> {{ \'related_links\' | translate }}</div><project-hyperlinks class="col-md-10 col-lg-10" project-id=vm.projectId></project-hyperlinks></div></div><div class="col-md-12 col-lg-12"><div class=row><div class="col-md-2 col-lg-2"><span class="fa fa-users" aira-hidden=true></span> {{ \'project.member\' | translate }}</div><div class="col-md-10 col-lg-10"><div class=row-eq-height><div ng-repeat="member in vm.membersList.data track by $index" class="col-md-4 col-lg-4"><b>{{ member.attributes.first_name }} {{ member.attributes.last_name}} </b>({{ member.attributes.username }})</div></div></div></div></div></div></div>'),e.put("app/project/list/all/allProjectList.html",'<div class="col-xs-12 col-sm-10 col-sm-offset-1"><h1>所有專案</h1></div><div id=main-content class="top-line col-xs-12 col-sm-10 col-sm-offset-1"><div class="alert alert-info" role=alert>參與您有興趣的專案！</div><div id=search-section class=row-eq-height><div class="col-md-7 col-lg-7"><div class=row><div class="col-md-2 col-lg-2" uib-dropdown><button type=button class="btn btn-default dropdown-toggle" uib-dropdown-toggle>{{ \'field\' | translate }} <span class=caret></span></button><ul class=dropdown-menu uib-dropdown-menu><li><a ng-click="vm.setSearchField(\'name\')">{{ \'project.search.fields.name\' | translate }}</a></li><li><a ng-click="vm.setSearchField(\'organization\')">{{ \'project.search.fields.organization\' | translate }}</a></li></ul></div><div class="col-md-8 col-lg-8"><div class=input-group><span class=input-group-addon>{{ \'project.search.fields.\' + vm.searchField | translate }}</span> <input class=form-control ng-model=vm.searchProject[vm.searchField] type=text name=search id=search placeholder="{{ \'search_keyword\' | translate }}"></div></div></div></div></div><div class=row><div class="col-xs-12 col-sm-12 col-md-12"><div class=row><div class="col-md-12 col-xs-12 col-sm-12"><div class="row project-item" ng-repeat="project in vm.projects | filter: vm.searchProject"><div class=col-md-8><div class=row><div class=col-md-12><h4><a ui-sref="projectDetail({ id: project.id })">{{ project.name }}</a></h4></div><div class=col-md-6>{{ project.organization }}</div><div class=col-md-6>{{ project.updated_at }}</div></div></div><div class=col-md-4><div class=row><div class="col-md-12 text-right"><span class="fa fa-user fa-lg" aria-hidden=true></span> {{ project.member_number }}</div><div class="col-md-12 text-right"><span class="fa fa-cubes fa-lg" aria-hidden=true></span> {{ project.process_number }}</div></div></div></div></div></div></div></div></div>'),e.put("app/project/list/attending/attendingProjectList.html",'<div class="col-xs-12 col-sm-10 col-sm-offset-1"><h1>已參與的專案</h1></div><div id=main-content class="top-line col-xs-12 col-sm-10 col-sm-offset-1"><table class="table table-striped"><thead><tr><th>專案名稱</th><th>組織名稱</th><th>填寫您的資料</th><th>離開</th></tr></thead><tbody><tr ng-repeat="project in vm.projects.data"><td><a ui-sref="projectDetail({ id: project.id })">{{ project.attributes.name }}</a></td><td>{{ project.attributes.organization }}</td><td><span class="glyphicon glyphicon-edit" ui-sref="fillProjectCustomFieldData({ projectId: project.id })" aria-hidden=true></span></td><td><span ui-sref="editProject({ id: project.id })" aria-hidden=true>離開</span></td></tr></tbody></table></div>'),e.put("app/project/list/managed/managedProjectList.html",'<div class="col-xs-12 col-sm-10 col-sm-offset-1"><h1>我的專案</h1></div><div id=main-content class="top-line col-xs-12 col-sm-10 col-sm-offset-1"><div id=search-section class=row-eq-height><div class="col-md-6 col-lg-6"><form class=form-inline><div class=form-group><label>{{ \'search\' | translate }}</label><input class=form-control ng-model=vm.searchProjectName.name type=text name=search id=search placeholder="{{ \'enter_project_name\' | translate }}"></div></form></div><div class="col-md-2 col-md-offset-4 col-lg-2 col-lg-offset-4"><button class="btn btn-primary" role=button ui-sref=createProject>新增專案</button></div></div><table class="table table-striped"><thead><tr><th>專案名稱</th><th>組織名稱</th><th>是否發布</th><th>建立時間</th><th>管理</th><th>刪除</th></tr></thead><tbody><tr ng-repeat="project in vm.projects | filter: vm.searchProjectName"><td><a ui-sref="projectDetail({ id: project.id })">{{ project.name }}</a></td><td>{{ project.organization }}</td><td>{{ project.is_published | yesNo }}</td><td>{{ project.created_at | formatDateTime }}</td><td><span class="glyphicon glyphicon-cog" ui-sref="project.show({ projectId: project.id })" aria-hidden=true></span></td><td><span class="glyphicon glyphicon-trash" ng-click=vm.delete(project.id) aria-hidden=true></span></td></tr></tbody></table></div><!--angular ui modal--><script type=text/ng-template id=deleteProject.html><div class="modal-header">\n    <h3 class="modal-title">注意！您的專案即將被刪除</h3>\n</div>\n<div class="modal-body">\n    <div class="alert alert-danger" role="alter" ng-show="vm.deleteMsg">{{vm.deleteMsg}}</div>\n    <div class="alert alert-warning" role="alert">{{vm.remind}}</div>\n</div>\n<div class="modal-footer">\n    <button class="btn btn-danger" type="button" ng-click="vm.ok()">確認刪除專案</button>\n    <button class="btn btn-default" type="button" ng-click="vm.cancel()">取消</button>\n</div></script>'),
e.put("app/project/member/list/projectMemberList.html",'<span class=h2-inline>成員管理</span><!-- <div ng-repeat="item in vm.memberCustomFieldDataList track by $index" class="row">\n	<div class="col-md-12 col-lg-12" ng-show="item">\n		<h4> <span class="glyphicon glyphicon-user"></span> 成員：{{ vm.getIncludedMember($index).first_name }}{{ vm.getIncludedMember($index).last_name }} ({{ vm.getIncludedMember($index).username }})</h4>\n	</div>\n	<div class="col-md-12 col-lg-12">\n		<p class="text-muted">\n			{{ vm.getIncludedMember($index).attending_at.date | date:\'yyyy-MM-dd HH:mm\' }}\n		</p>\n	</div>\n	<div class="col-md-12 col-lg-12" ng-show="item">\n		<fill-custom-field-type type="vm.getIncludedCustomField(value.relationships.project_custom_field.data.id).type" title="vm.getIncludedCustomField(value.relationships.project_custom_field.data.id).name" field-data="value.attributes.data" metadata="vm.getIncludedCustomField(value.relationships.project_custom_field.data.id).metadata"></fill-custom-field-type>\n		<table class="table">\n			<thead>\n				<tr>\n					<th class="col-md-2">\n						欄位名稱\n					</th>\n					<th class="col-md-2">\n						內容\n					</th>\n				</tr>\n			</thead>\n			<tbody>\n				<tr ng-repeat="value in item">\n					<th class="col-md-2">\n						{{ vm.getIncludedCustomField(value.relationships.project_custom_field.data.id).name }}\n					</th>\n					<td class="col-md-10">\n						{{ value.attributes.data | customFieldDataToText: vm.getIncludedCustomField(value.relationships.project_custom_field.data.id).type:vm.getIncludedCustomField(value.relationships.project_custom_field.data.id).metadata}}\n					</td>\n				</tr>\n			</tbody>\n		</table>\n	</div>\n</div> --><div ng-repeat="member in vm.members" class=row><div class="col-md-12 col-lg-12" ng-show=member><h4><span class="glyphicon glyphicon-user"></span> 成員：{{ member.first_name }}{{ member.last_name }} ({{ member.username }})</h4></div><div class="col-md-12 col-lg-12"><p class=text-muted>{{ member.attending_at.date | date:\'yyyy-MM-dd HH:mm\' }}</p></div><div class="col-md-12 col-lg-12" ng-show=member><!-- <fill-custom-field-type type="vm.getIncludedCustomField(value.relationships.project_custom_field.data.id).type" title="vm.getIncludedCustomField(value.relationships.project_custom_field.data.id).name" field-data="value.attributes.data" metadata="vm.getIncludedCustomField(value.relationships.project_custom_field.data.id).metadata"></fill-custom-field-type> --><table class=table><thead><tr><th class=col-md-2>欄位名稱</th><th class=col-md-2>內容</th></tr></thead><tbody><tr ng-repeat="customFieldData in member.custom_field_data"><th class=col-md-2>{{ vm.getCustomFieldById(customFieldData.project_custom_field.data.id).name }}</th><td class=col-md-10>{{ customFieldData.data | customFieldDataToText: vm.getCustomFieldById(customFieldData.project_custom_field.data.id).type:vm.getCustomFieldById(customFieldData.project_custom_field.data.id).metadata}}</td></tr></tbody></table></div></div>'),e.put("app/user/email/verify/verifyUserEmail.html",'<div class="col-md-8 col-md-offset-2"><h1 class=text-center>驗證您的電子信箱</h1></div><div id=main-content class="col-md-8 col-md-offset-2"><div class=email-verification ng-show=vm.verification><p class=lead>請稍候，目前正在進行驗證...</p></div><div class=email-verification-success ng-show=vm.verificationSuccess><p class=lead>{{vm.volunteer.email}} 電子信箱已經通過驗證</p></div><div class=email-verification-success ng-hide=vm.verificationStatus><p class=lead>{{vm.volunteer.email}} 電子信箱無法驗證</p><!--<button class="btn btn-primary btn-lg">重新驗證</button>--></div></div>'),e.put("app/user/profile/update/updateAboutAndContact.html",'<div class=row><vms-message data=vm.alert></vms-message><h2>關於</h2><hr><div class="col-lg-12 col-md-12"><div id=profile-avatar class=pull-left><img ng-src={{vm.profile.avatar_url}} id=profile-avatar width=200 class="img-responsive img-circle center-block"> <input id=avatar-input type=file ng-model=vm.avatar onloadend=vm.selectAvatar base-sixty-four-input></div></div></div><form><div class="row-eq-height profile-section"><div class="form-group col-md-6 col-lg-6 col-sm-6 col-xs-12"><div class=row><label for=first-name class="control-label col-md-4 col-lg-4">姓氏</label><div class="col-md-8 col-lg-8"><input type=text class=form-control id=first-name placeholder=姓氏 ng-model=vm.profile.first_name required></div></div></div><div class="form-group col-md-6 col-lg-6 col-sm-6 col-xs-12"><div class=row><label for=last-name class="control-label col-md-4 col-lg-4">名字</label><div class="col-md-8 col-lg-8"><input type=text class=form-control id=first-name placeholder=名字 ng-model=vm.profile.last_name required></div></div></div><div class="form-group col-md-6 col-lg-6 col-sm-6 col-xs-12"><div class=row><label for=birth-year class="control-label col-md-4 col-lg-4">出生年份</label><div class="col-md-8 col-lg-8"><div class=input-group><input id=birth-year type=text class=form-control uib-datepicker-popup={{vm.datePicker.format}} ng-model=vm.profile.birth_year is-open=vm.datePicker.status.opened datepicker-options=vm.datePicker.dateOptions ng-required=true close-text=Close> <span class=input-group-btn><button type=button class="btn btn-default" ng-click=vm.openDatePicker($event)><i class="glyphicon glyphicon-calendar"></i></button></span></div></div></div></div><div class="form-group col-md-6 col-lg-6 col-sm-6 col-xs-12"><div class=row><label for=gender class="control-label col-md-4 col-lg-4">性別</label><div class="col-md-8 col-lg-8"><label class=radio-inline><input type=radio name=gender id=gender value=female ng-model=vm.profile.gender> 女</label><label class=radio-inline><input type=radio name=gender id=gender value=male ng-model=vm.profile.gender> 男</label></div></div></div><div class="form-group col-md-6 col-lg-6 col-sm-6 col-xs-12"><div class=row><label for=city class="control-label col-md-4 col-lg-4">縣市</label><div class="col-md-8 col-lg-8"><select class=form-control name=city ng-model=vm.profile.city.id ng-options="city.id as city.name_zh_tw for city in vm.cities"></select></div></div></div><div class="form-group col-md-6 col-lg-6 col-sm-6 col-xs-12"><div class=row><label for=location class="control-label col-md-4 col-lg-4">鄉鎮市區</label><div class="col-md-8 col-lg-8"><input name=location type=text class=form-control id=location placeholder=地址 ng-model=vm.profile.location></div></div></div><div class="form-group col-md-12 col-lg-12 col-sm-12 col-xs-12"><div class=row><label for=profile-introduction class="control-label col-md-2 col-lg-2">介紹</label><div class="col-md-10 col-lg-10"><textarea name=p-introduction type=text class=form-control id=p-introduction placeholder=介紹 rows=3 ng-model=vm.profile.introduction>\n					</textarea></div></div></div></div><div class="row profile-section"><h2>聯絡資訊</h2><hr><div class="form-group col-md-6 col-lg-6 col-sm-6 col-xs-12"><div class=row><label for=phone-number class="control-label col-md-4 col-lg-4">電話號碼</label><div class="col-md-8 col-lg-8"><input name=phone-number type=text class=form-control id=phone-number placeholder=電話號碼 ng-model=vm.profile.phone_number></div></div></div><div class="form-group col-md-6 col-lg-6 col-sm-6 col-xs-12"><div class=row><label for=emergency-contact class="control-label col-md-4 col-lg-4">緊急聯絡人</label><div class="col-md-8 col-lg-8"><input name=emergency-contact type=text class=form-control id=emergency-contact placeholder=緊急聯絡人 ng-model=vm.profile.emergency_contact></div></div></div><div class="form-group col-md-6 col-lg-6 col-sm-6 col-xs-12"><div class=row><label for=emergency-contact-phone class="control-label col-md-4 col-lg-4">緊急聯絡人電話</label><div class="col-md-8 col-lg-8"><input name=emergency-contact-phone type=text class=form-control id=emergency-contact-phone placeholder=緊急聯絡人電話 ng-model=vm.profile.emergency_phone></div></div></div></div><div class="row profile-section"><div class="col-md-2 col-md-offset-5"><button class="btn btn-primary btn-lg" ng-click=vm.updateAboutAndContact()>送出</button></div><div class=col-md-5></div></div></form>'),e.put("app/user/profile/update/updateUserProfile.html",'<div class="col-xs-12 col-sm-10 col-sm-offset-1"><h1>編輯我的資料</h1></div><div id=main-content class="top-line col-xs-12 col-sm-10 col-sm-offset-1"><div class=row><div class=col-md-3><div class="panel panel-default"><div class=panel-heading><b>個人資料</b></div><ul class=list-group><li class=list-group-item><a ui-sref=rootEditProfile.aboutContact>關於我與聯絡</a></li><li class=list-group-item><a ui-sref=rootEditProfile.experienceEducation>經驗與教育</a></li><li class=list-group-item><a ui-sref=rootEditProfile.skillEquipment>技能與裝備</a></li><li class=list-group-item><a ui-sref=rootEditProfile.changePassword>{{ \'change_password\' | translate }}</a></li></ul></div></div><div class=col-md-9><div class="anim-in-out anim-fade" data-anim-speed=1000 ui-view=profileContent></div></div></div></div>'),e.put("app/user/profile/show/showUserProfile.html",'<div class="col-xs-12 col-md-3 col-sm-3" id=profile-introduction><img ng-src={{vm.profile.avatar_url}} id=profile-avatar width=300 class="img-responsive img-circle center-block"><h3 class=text-center>{{vm.profile.last_name +" "+ vm.profile.first_name}}</h3><p id=profile-self-introduction>{{vm.profile.introduction}}</p><div class=row id=profile-participate><div class="col-xs-12 col-sm-12"><div class=row><div class="col-sm-7 col-xs-6"><span>參與中的</span></div><div class="col-sm-5 col-xs-6"><span class="pull-right label label-primary">{{vm.profile.processes.participating_number}}</span></div></div></div><!-- <div class="col-sm-12 col-xs-12">\n            <div class="row">\n                <div class="col-sm-7 col-xs-6">\n                    <span>曾參與過的</span>\n                </div>\n                <div class="col-sm-5 col-xs-6">\n                    <span class="pull-right label label-primary">{{vm.profile.processes.participated_number}}</span>\n                </div>\n            </div>\n        </div> --></div><button class="btn btn-danger center-block" ng-click=vm.open()>刪除帳號</button></div><div class="col-xs-12 col-md-9 col-sm-9" id=profile-main><div id=profile-container><div ng-init="tab = 1"><ul class="nav nav-tabs" id=profile-right-navbar><li ng-class="{active:tab===1}"><a href ng-click="tab=1">個人資料</a></li><!-- <li ng-class="{active:tab===2}"><a href ng-click="tab=2">Projects</a></li> --></ul></div><div id=main-profile class=panel ng-show="tab===1"><div id=profile-about><div class="row profile-header"><div class="col-md-4 col-lg-4 col-xs-12"><h3 class="glyphicon glyphicon-user" aria-hidden=true>我的資料</h3></div><div class="col-md-12 col-xs-12"><button type=button class="btn btn-primary pull-right" ui-sref=rootEditProfile.edit><span class="glyphicon glyphicon-pencil" aria-hidden=true></span> 編輯</button></div></div><div class="row profile-content"><div class="col-md-6 col-sm-6 col-xs-12"><div class=row><span class="col-sm-5 col-xs-5">姓氏 </span><span class="col-sm-7 col-xs-7">{{vm.profile.first_name}}</span></div></div><div class="col-md-6 col-sm-6 col-xs-12"><div class=row><span class="col-sm-5 col-xs-5">名字 </span><span class="col-sm-7 col-xs-7">{{vm.profile.last_name}}</span></div></div><div class="col-md-6 col-sm-6 col-xs-12"><div class=row><span class="col-sm-5 col-xs-5">帳號 </span><span class="col-sm-7 col-xs-7">{{vm.profile.username}}</span></div></div><div class="col-md-6 col-sm-6 col-xs-12"><div class=row><span class="col-sm-5 col-xs-5">出生年份 </span><span class="col-sm-7 col-xs-7">{{vm.profile.birth_year | date : \'yyyy\'}}</span></div></div><div class="col-md-6 col-sm-6 col-xs-12"><div class=row><span class="col-sm-5 col-xs-5">性別 </span><span class="col-sm-7 col-xs-7">{{vm.profile.gender | translate}}</span></div></div><div class="col-md-6 col-sm-6 col-xs-12"><div class=row><span class="col-sm-5 col-xs-5">縣市 </span><span class="col-sm-7 col-xs-7">{{ vm.profile.city.name_en }}</span></div></div><div class="col-md-6 col-sm-6 col-xs-12"><div class=row><span class="col-sm-5 col-xs-12">鄉鎮市區 </span><span class="col-sm-7 col-xs-12">{{vm.profile.location}}</span></div></div></div></div><hr><div id=profile-contact><div class="row profile-header"><div class="col-md-4 col-lg-3 col-sm-12"><h3 class="glyphicon glyphicon-phone-alt" aria-hidden=true>聯絡資訊</h3></div></div><div class="row profile-content"><div class="col-md-6 col-sm-6"><div class=row><span class=col-sm-4>電話號碼 </span><span class=col-sm-8>{{vm.profile.phone_number}}</span></div></div><div class="col-md-6 col-sm-6"><div class=row><span class=col-sm-4>電子郵件 </span><span class=col-sm-8>{{vm.profile.email}}</span></div></div><div class="col-md-6 col-sm-6"><div class=row><span class=col-sm-4>緊急聯絡人 </span><span class=col-sm-8>{{vm.profile.emergency_contact}}</span></div></div><div class="col-md-6 col-sm-6"><div class=row><span class=col-sm-4>緊急聯絡電話 </span><span class=col-sm-8>{{vm.profile.emergency_phone}}</span></div></div></div></div><hr><!--            <div ui-view="profileEducation" ng-include="\'/app/volunteer-rofile/volunteer-experience-education.html\'"></div>\n            <hr>\n            <div ui-view="profileSkillEquipment" ng-include="\'/app/volunteer-profile/volunteer-skill-equipment.html\'"></div> --></div><div class=panel ng-show="tab===2"><div ng-include src="\'/app/volunteerProfile/volunteer-projects.html\'"></div></div></div></div><!--angular ui modal--><script type=text/ng-template id=myModalContent.html><div class="modal-header">\n    <h3 class="modal-title">注意！您的帳號即將被刪除</h3>\n</div>\n<div class="modal-body">\n    <div class="alert alert-danger" role="alter" ng-show="vm.deleteMsg">{{vm.deleteMsg}}</div>\n    <div class="alert alert-warning" role="alert">{{vm.remind}}</div>\n    <div class="form-group">\n        <label for="password" class="control-label">請輸入您的密碼：</label>\n        <input type="password" id="password" class="form-control" ng-model="vm.password" placeholder="輸入您的密碼">\n    </div>\n</div>\n<div class="modal-footer">\n    <button class="btn btn-danger" type="button" ng-click="vm.ok()">確認刪除帳號</button>\n    <button class="btn btn-default" type="button" ng-click="vm.cancel()">取消</button>\n</div></script>'),e.put("app/user/profile/show/userAbout.html",'<div class="row profile-header"><div class="col-md-3 col-xs-12"><h3 class="glyphicon glyphicon-user" aria-hidden=true>關於</h3></div><div class="col-md-9 col-xs-12"><button type=button class="btn btn-primary pull-right" ui-sref=editProfile><span class="glyphicon glyphicon-pencil" aria-hidden=true></span> 編輯</button></div></div><div class="row profile-content"><div class="col-md-6 col-sm-6 col-xs-12"><div class=row><span class="col-sm-5 col-xs-5">姓氏 </span><span class="col-sm-7 col-xs-7">{{vm.profile.first_name}}</span></div></div><div class="col-md-6 col-sm-6 col-xs-12"><div class=row><span class="col-sm-5 col-xs-5">名字 </span><span class="col-sm-7 col-xs-7">{{vm.profile.last_name}}</span></div></div><div class="col-md-6 col-sm-6 col-xs-12"><div class=row><span class="col-sm-5 col-xs-5">帳號 </span><span class="col-sm-7 col-xs-7">{{vm.profile.username}}</span></div></div><div class="col-md-6 col-sm-6 col-xs-12"><div class=row><span class="col-sm-5 col-xs-5">出生年份 </span><span class="col-sm-7 col-xs-7">{{vm.profile.birth_year}}</span></div></div><div class="col-md-6 col-sm-6 col-xs-12"><div class=row><span class="col-sm-5 col-xs-5">性別 </span><span class="col-sm-7 col-xs-7">{{vm.profile.gender}}</span></div></div><div class="col-md-6 col-sm-6 col-xs-12"><div class=row><span class="col-sm-5 col-xs-5">縣市 </span><span class="col-sm-7 col-xs-7">{{ vm.profile.city.name_zh_tw }}</span></div></div><div class="col-md-6 col-sm-6 col-xs-12"><div class=row><span class="col-sm-5 col-xs-12">鄉鎮市區 </span><span class="col-sm-7 col-xs-12">{{vm.profile.location}}</span></div></div></div>'),e.put("app/user/profile/show/userContact.html",'<div class="row profile-header"><div class=col-md-3><h3 class="glyphicon glyphicon-phone-alt" aria-hidden=true>聯絡資訊</h3></div></div><div class="row profile-content"><div class="col-md-6 col-sm-6"><div class=row><span class=col-sm-4>電話號碼 </span><span class=col-sm-8>{{vm.profile.phone_number}}</span></div></div><div class="col-md-6 col-sm-6"><div class=row><span class=col-sm-4>電子郵件 </span><span class=col-sm-8>{{vm.profile.email}}</span></div></div><div class="col-md-6 col-sm-6"><div class=row><span class=col-sm-4>緊急聯絡人 </span><span class=col-sm-8>{{vm.profile.emergency_contact}}</span></div></div><div class="col-md-6 col-sm-6"><div class=row><span class=col-sm-4>緊急聯絡電話 </span><span class=col-sm-8>{{vm.profile.emergency_phone}}</span></div></div></div>'),e.put("app/user/profile/show/userExperienceEducation.html",'<div class=row><div class="col-md-6 col-sm-6"><div class=row><div class="col-md-12 profile-header"><h3 class="glyphicon glyphicon-file" aria-hidden=true>經歷</h3></div><div class=profile-content-list ng-repeat="(id, experience) in vm.profile.experience"><div id=profile-experience-{{id}} class=profile-content-item><span class=col-sm-12>{{experience.name}} </span><span class=col-sm-12>{{experience.job_title}} </span><span class=col-sm-12>{{experience.start_year}} ~ {{experience.end_year}}</span></div></div></div></div><div class="col-md-6 col-sm-6"><div class=row><div class="col-md-12 profile-header"><h3 class="glyphicon glyphicon-education" aria-hidden=true>學歷</h3></div><div class=profile-content-list ng-repeat="(id, education) in vm.profile.education"><div id=profile-education-{{id}} class=profile-content-item><span class=col-sm-12>{{education.field_of_study}} </span><span class=col-sm-12>{{education.school}} </span><span class=col-sm-12>{{education.start_year}} ~ {{education.end_year}}</span></div></div></div></div></div>'),e.put("app/user/profile/show/userProjects.html",'<div class="row profile-right-padding"><h3>Projects you\'re in</h3><div class=table-responsive><table class=table><thead><tr class=profile-project-tableHead><th>#</th><th>Project Name</th><th>Manager</th><th>Details</th><th>Cancel</th></tr></thead><tbody><tr ng-repeat="project in vm.projects"><td>{{project.Id}}</td><td>{{project.ProjectName}}</td><td>{{project.Manager}}</td><td><a href=# class=profile-project-a>View</a></td><td><a href=#><span class="glyphicon glyphicon-share" aria-hidden=true></span></a></td></tr></tbody></table></div><h3>Invites</h3><div class=table-responsive><table class=table><thead><tr class=profile-project-tableHead><th>#</th><th>Project Name</th><th>Manager</th><th>Details</th><th>Action</th></tr></thead><tbody><tr ng-repeat="invite in vm.invites"><td>{{invite.Id}}</td><td>{{invite.ProjectName}}</td><td>{{invite.Manager}}</td><td><a href=# class=profile-project-a>View</a></td><td><button class="btn btn-default dropdown-toggle" type=button data-toggle=dropdown>Choose <span class=caret></span></button><!-- <ul class="dropdown-menu" ng-repeat="select in vm.choose">\n                            <li><a href="#">select</a></li>\n                        </ul> --></td></tr></tbody></table></div></div>'),e.put("app/user/profile/show/userSkillEquipment.html",'<div class=row><div class="col-md-6 col-sm-6"><div class=row><div class="col-md-12 profile-header"><h3 class="glyphicon glyphicon-certificate" aria-hidden=true>技能</h3></div><div class=profile-content-list><div id=profile-skills class=profile-content-item><span class=col-sm-12><span ng-repeat="skill in vm.profile.skills">{{skill.name}}&nbsp;</span></span></div></div></div></div><div class="col-md-6 col-sm-6"><div class=row><div class="col-md-12 profile-header"><h3 class="glyphicon glyphicon-wrench" aria-hidden=true>器材/設備</h3></div><div class=profile-content-list><div id=profile-equipment class=profile-content-item><span class=col-sm-12><span ng-repeat="equipment in vm.profile.equipment">{{equipment.name}}&nbsp;</span></span></div></div></div></div></div>'),e.put("app/user/register/success/userRegisterSuccess.html",'<div class="col-md-8 col-md-offset-2"><h1 class=text-center>完成註冊</h1></div><div id=main-content class="col-md-8 col-md-offset-2 top-line"><p class=lead>{{ vm.volunteer.last_name }} 您好，為了完成註冊，身份驗證確認信件會寄到您的 {{ vm.volunteer.email }} 信箱。</p><p class=lead>您可以點擊信件中的連結完成身份驗證。</p><!--<p class="lead">如果您許久未收到註冊信件，請點擊下方連結請求重送身份驗證信件。</p>\n  <button class="btn btn-primary btn-lg" ui-sref="register">重送</button>--></div>'),e.put("app/user/skillEquipment/edit/userEditSkillEquipment.html",'<div class="row profile-section"><h2>技能</h2><hr><form><div class="col-lg-12 col-mg-12"><tags-input class=bootstrap ng-model=vm.skills min-length=1 display-property=name placeholder="{{ \'placeholder.add_a_new_skill\' | translate }}" replace-spaces-with-dashes=false><auto-complete source=vm.refreshSkillCandidatedKeywords($query) min-length=1 debounce-delay=1000 max-results=10 display-property=name></auto-complete></tags-input></div><div class="col-lg-12 col-mg-12"><button type=submit ng-click=vm.updateSkills() class="btn btn-primary">儲存</button></div></form></div><div class="row profile-section"><h2>裝備</h2><hr><form><div class="col-lg-12 col-mg-12"><tags-input class=bootstrap ng-model=vm.equipment min-length=1 display-property=name placeholder="{{ \'placeholder.add_a_new_equipment\' | translate }}" replace-spaces-with-dashes=false><auto-complete source=vm.refreshEquipmentCandidateKeywords($query) min-length=1 debounce-delay=1000 max-results=10 display-property=name></auto-complete></tags-input></div><div class="col-lg-12 col-mg-12"><button type=submit ng-click=vm.updateEquipment() class="btn btn-primary">儲存</button></div></form></div>')}]);
//# sourceMappingURL=../maps/scripts/app-f41cf1d43f.js.map
